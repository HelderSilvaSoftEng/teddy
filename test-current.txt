
> @teddy-challenger/source@0.0.0 backend:e2e
> npx nx e2e backend-e2e


 NX   Running target e2e for project backend-e2e and 2 tasks it depends on:



> nx run backend:build

> webpack-cli build --node-env=production

[1m[33mWARNING[39m[22m in [1m./node_modules/@opentelemetry/sdk-node/build/src/TracerProviderWithEnvExporter.js[39m[22m [1m[32m89:39-80[39m[22m
[1mModule [1m[31mnot found[39m[22m[1m: [1m[31mError[39m[22m[1m: Can't resolve '@opentelemetry/exporter-jaeger' in 'C:\Projects\Desafio\teddy-challenger\apps\backend\node_modules\@opentelemetry\sdk-node\build\src'[39m[22m

webpack compiled with [1m[33m1 warning[39m[22m (efbae647c14bc0b4)

> nx run backend:serve:development


> nx run backend-e2e:e2e

NX Daemon is not running. Node process will not restart automatically after file changes.
Setting up...
[2m> [22m[2mnx run[22m backend:build:development
[2m> [22mwebpack-cli build --node-env=development
[1m[33mWARNING[39m[22m in [1m./node_modules/@opentelemetry/sdk-node/build/src/TracerProviderWithEnvExporter.js[39m[22m [1m[32m89:39-80[39m[22m
[1mModule [1m[31mnot found[39m[22m[1m: [1m[31mError[39m[22m[1m: Can't resolve '@opentelemetry/exporter-jaeger' in 'C:\Projects\Desafio\teddy-challenger\apps\backend\node_modules\@opentelemetry\sdk-node\build\src'[39m[22m
webpack compiled with [1m[33m1 warning[39m[22m (efbae647c14bc0b4)
[0m[7m[1m[32m NX [39m[22m[27m[0m  [32mSuccessfully ran target [1mbuild[22m for project backend[39m
Debugger listening on ws://localhost:9229/cc70712e-a10e-4c6e-b1e1-29485b1c3895
Debugger listening on ws://localhost:9229/cc70712e-a10e-4c6e-b1e1-29485b1c3895
For help, see: https://nodejs.org/en/docs/inspector

[dotenv@17.2.3] injecting env (0) from .env -- tip: Â­Æ’Ã¶Ã¤ add secrets lifecycle management: https://dotenvx.com/ops
[95m[Nest] 53776  - [39m21/01/2026, 22:22:59 [95m  DEBUG[39m [38;5;3m[TypeOrmConfig] [39m[95mDatabase Config: {"host":"localhost","port":5432,"database":"teddy_db","synchronize":true}[39m
Â­Æ’Ã¶Ã¬ [TELEMETRY] Inicializando OpenTelemetry com endpoint: http://localhost:4318/v1/traces
Ã”Â£Ã  [TELEMETRY] OpenTelemetry iniciado com sucesso
Â­Æ’Ã¶Ã¬ [MAIN] Iniciando NestFactory.create...
[90m[4mquery:[24m[39m [94mSELECT[0m [95mversion[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_schema[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mCREATE[0m [37mEXTENSION[0m [94mIF[0m [94mNOT[0m [94mEXISTS[0m [37m"uuid-ossp"[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_schema[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_database[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"table_schema"[0m[37m,[0m [37m"table_name"[0m[37m,[0m [95mobj_description[0m[37m([0m[37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37m"table_schema"[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37m"table_name"[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37mregclass[0m[37m,[0m [37m'pg_class'[0m[37m)[0m [94mAS[0m [37mtable_comment[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"tables"[0m [94mWHERE[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [94mTRUE[0m [94mFROM[0m [37minformation_schema[0m[37m.[0m[37mcolumns[0m [94mWHERE[0m [37mtable_name[0m [37m=[0m [37m'pg_class'[0m [94mand[0m [37mcolumn_name[0m [37m=[0m [37m'relispartition'[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37mcolumns[0m[37m.[0m[37m*[0m[37m,[0m [37mpg_catalog[0m[37m.[0m[95mcol_description[0m[37m([0m[37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37mtable_catalog[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37mtable_schema[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37mtable_name[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37mregclass[0m[37m:[0m[37m:[0m[37moid[0m[37m,[0m [37mordinal_position[0m[37m)[0m [94mAS[0m [37mdescription[0m[37m,[0m [37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37m"udt_schema"[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37m"udt_name"[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37m"regtype"[0m[37m:[0m[37m:[0m[94mtext[0m [94mAS[0m [37m"regtype"[0m[37m,[0m [37mpg_catalog[0m[37m.[0m[95mformat_type[0m[37m([0m[37m"col_attr"[0m[37m.[0m[37m"atttypid"[0m[37m,[0m [37m"col_attr"[0m[37m.[0m[37m"atttypmod"[0m[37m)[0m [94mAS[0m [37m"format_type"[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"columns"[0m [94mLEFT JOIN[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_attribute"[0m [94mAS[0m [37m"col_attr"[0m [94mON[0m [37m"col_attr"[0m[37m.[0m[37m"attname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"column_name"[0m [94mAND[0m [37m"col_attr"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m([0m [94mSELECT[0m [37m"cls"[0m[37m.[0m[37m"oid"[0m [94mFROM[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_class"[0m [94mAS[0m [37m"cls"[0m [94mLEFT JOIN[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_namespace"[0m [94mAS[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cls"[0m[37m.[0m[37m"relnamespace"[0m [94mWHERE[0m [37m"cls"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"table_name"[0m [94mAND[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"table_schema"[0m [37m)[0m [94mWHERE[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"cnst"[0m[37m.[0m[37m"conname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [95mpg_get_constraintdef[0m[37m([0m[37m"cnst"[0m[37m.[0m[37m"oid"[0m[37m)[0m [94mAS[0m [37m"expression"[0m[37m,[0m [94mCASE[0m [37m"cnst"[0m[37m.[0m[37m"contype"[0m [94mWHEN[0m [37m'p'[0m [94mTHEN[0m [37m'PRIMARY'[0m [94mWHEN[0m [37m'u'[0m [94mTHEN[0m [37m'UNIQUE'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CHECK'[0m [94mWHEN[0m [37m'x'[0m [94mTHEN[0m [37m'EXCLUDE'[0m [94mEND[0m [94mAS[0m [37m"constraint_type"[0m[37m,[0m [37m"a"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m [94mFROM[0m [37m"pg_constraint"[0m [37m"cnst"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"t"[0m [94mON[0m [37m"t"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"conrelid"[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"connamespace"[0m [94mLEFT JOIN[0m [37m"pg_attribute"[0m [37m"a"[0m [94mON[0m [37m"a"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"conrelid"[0m [94mAND[0m [37m"a"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [94mANY[0m [37m([0m[37m"cnst"[0m[37m.[0m[37m"conkey"[0m[37m)[0m [94mWHERE[0m [37m"t"[0m[37m.[0m[37m"relkind"[0m [94mIN[0m [37m([0m[37m'r'[0m[37m,[0m [37m'p'[0m[37m)[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"i"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [37m"a"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m[37m,[0m [94mCASE[0m [37m"ix"[0m[37m.[0m[37m"indisunique"[0m [94mWHEN[0m [37m't'[0m [94mTHEN[0m [37m'TRUE'[0m [94mELSE[0m[37m'FALSE'[0m [94mEND[0m [94mAS[0m [37m"is_unique"[0m[37m,[0m [95mpg_get_expr[0m[37m([0m[37m"ix"[0m[37m.[0m[37m"indpred"[0m[37m,[0m [37m"ix"[0m[37m.[0m[37m"indrelid"[0m[37m)[0m [94mAS[0m [37m"condition"[0m[37m,[0m [37m"types"[0m[37m.[0m[37m"typname"[0m [94mAS[0m [37m"type_name"[0m[37m,[0m [37m"am"[0m[37m.[0m[37m"amname"[0m [94mAS[0m [37m"index_type"[0m [94mFROM[0m [37m"pg_class"[0m [37m"t"[0m [94mINNER JOIN[0m [37m"pg_index"[0m [37m"ix"[0m [94mON[0m [37m"ix"[0m[37m.[0m[37m"indrelid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"a"[0m [94mON[0m [37m"a"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"oid"[0m  [94mAND[0m [37m"a"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [94mANY[0m [37m([0m[37m"ix"[0m[37m.[0m[37m"indkey"[0m[37m)[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"relnamespace"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"i"[0m [94mON[0m [37m"i"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"ix"[0m[37m.[0m[37m"indexrelid"[0m [94mINNER JOIN[0m [37m"pg_type"[0m [37m"types"[0m [94mON[0m [37m"types"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"a"[0m[37m.[0m[37m"atttypid"[0m [94mINNER JOIN[0m [37m"pg_am"[0m [37m"am"[0m [94mON[0m [37m"i"[0m[37m.[0m[37m"relam"[0m [37m=[0m [37m"am"[0m[37m.[0m[37m"oid"[0m [94mLEFT JOIN[0m [37m"pg_constraint"[0m [37m"cnst"[0m [94mON[0m [37m"cnst"[0m[37m.[0m[37m"conname"[0m [37m=[0m [37m"i"[0m[37m.[0m[37m"relname"[0m [94mWHERE[0m [37m"t"[0m[37m.[0m[37m"relkind"[0m [94mIN[0m [37m([0m[37m'r'[0m[37m,[0m [37m'p'[0m[37m)[0m [94mAND[0m [37m"cnst"[0m[37m.[0m[37m"contype"[0m [94mIS NULL[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"con"[0m[37m.[0m[37m"conname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"att2"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m[37m,[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"referenced_table_schema"[0m[37m,[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"referenced_table_name"[0m[37m,[0m [37m"att"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"referenced_column_name"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"confdeltype"[0m [94mAS[0m [37m"on_delete"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"confupdtype"[0m [94mAS[0m [37m"on_update"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"condeferrable"[0m [94mAS[0m [37m"deferrable"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"condeferred"[0m [94mAS[0m [37m"deferred"[0m [94mFROM[0m [37m([0m [94mSELECT[0m [95mUNNEST[0m [37m([0m[37m"con1"[0m[37m.[0m[37m"conkey"[0m[37m)[0m [94mAS[0m [37m"parent"[0m[37m,[0m [95mUNNEST[0m [37m([0m[37m"con1"[0m[37m.[0m[37m"confkey"[0m[37m)[0m [94mAS[0m [37m"child"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"confrelid"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"conrelid"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"conname"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"contype"[0m[37m,[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m[37m,[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"condeferrable"[0m[37m,[0m [94mCASE[0m [94mWHEN[0m [37m"con1"[0m[37m.[0m[37m"condeferred"[0m [94mTHEN[0m [37m'INITIALLY DEFERRED'[0m [94mELSE[0m [37m'INITIALLY IMMEDIATE'[0m [94mEND[0m [94mas[0m [37mcondeferred[0m[37m,[0m [94mCASE[0m [37m"con1"[0m[37m.[0m[37m"confdeltype"[0m [94mWHEN[0m [37m'a'[0m [94mTHEN[0m [37m'NO ACTION'[0m [94mWHEN[0m [37m'r'[0m [94mTHEN[0m [37m'RESTRICT'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CASCADE'[0m [94mWHEN[0m [37m'n'[0m [94mTHEN[0m [37m'SET NULL'[0m [94mWHEN[0m [37m'd'[0m [94mTHEN[0m [37m'SET DEFAULT'[0m [94mEND[0m [94mas[0m [37m"confdeltype"[0m[37m,[0m [94mCASE[0m [37m"con1"[0m[37m.[0m[37m"confupdtype"[0m [94mWHEN[0m [37m'a'[0m [94mTHEN[0m [37m'NO ACTION'[0m [94mWHEN[0m [37m'r'[0m [94mTHEN[0m [37m'RESTRICT'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CASCADE'[0m [94mWHEN[0m [37m'n'[0m [94mTHEN[0m [37m'SET NULL'[0m [94mWHEN[0m [37m'd'[0m [94mTHEN[0m [37m'SET DEFAULT'[0m [94mEND[0m [94mas[0m [37m"confupdtype"[0m [94mFROM[0m [37m"pg_class"[0m [37m"cl"[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"relnamespace"[0m [37m=[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_constraint"[0m [37m"con1"[0m [94mON[0m [37m"con1"[0m[37m.[0m[37m"conrelid"[0m [37m=[0m [37m"cl"[0m[37m.[0m[37m"oid"[0m [94mWHERE[0m [37m"con1"[0m[37m.[0m[37m"contype"[0m [37m=[0m [37m'f'[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m [37m)[0m [37m"con"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"att"[0m [94mON[0m [37m"att"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"confrelid"[0m [94mAND[0m [37m"att"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"child"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"cl"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"confrelid"[0m  [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relispartition"[0m [37m=[0m [37m'f'[0m[94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"relnamespace"[0m [37m=[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"att2"[0m [94mON[0m [37m"att2"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"conrelid"[0m [94mAND[0m [37m"att2"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"parent"[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"tables"[0m [94mWHERE[0m [37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'typeorm_metadata'[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Ã”Â£Ã  [MAIN] NestFactory.create completo
Â­Æ’Ã¶Ã¬ [MAIN] Iniciando app.listen...
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.783 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mUnsupported route path: "/api/*". In previous versions, the symbols ?, *, and + were used to denote optional or repeating path parameters. The latest version of "path-to-regexp" now requires the use of named parameters. For example, instead of using a route like /users/* to capture all routes starting with "/users", you should use /users/*path. For more details, refer to the migration guide. Attempting to auto-convert...[39m
    [35mcontext[39m: "LegacyRouteConverter"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.788 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mAppController {/api}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.790 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.790 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mUserController {/api/v1/users}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.791 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.792 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.792 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.793 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, PUT} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.793 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, DELETE} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.794 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id/password, PATCH} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.794 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mCustomerController {/api/v1/customers}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.794 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.795 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.795 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.795 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, PUT} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.796 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, DELETE} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.796 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mAuthController {/api/auth}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.796 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/login, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.796 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/refresh, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.796 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/logout, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.796 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/me, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.797 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/recovery-password, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.797 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/reset-password, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.797 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/increment-access, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.797 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mHealthController {/api/health}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.798 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.798 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health/live, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.798 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health/ready, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.798 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMetricsController {/api/metrics}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.798 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/metrics, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.798 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mDashboardController {/api/dashboard}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.798 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/stats, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.799 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/recent-customers, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.799 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/customer-trend/month, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:02.799 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/customer-trend/day, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@teddy.com"][0m
Ã”Â£Ã´ Admin user already exists
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@teddy.com"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"userId"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [90m-- PARAMETERS: ["56687d17-70a5-4b71-8791-0ebca642404b"][0m
Ã”Â£Ã´ Customers already exist (29 found)
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:04.825 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mNest application successfully started[39m
    [35mcontext[39m: "NestApplication"
Ã”Â£Ã  [MAIN] app.listen completo
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:04.827 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’ÃœÃ‡ Application is running on: http://localhost:3000/api[39m
    [35mcontext[39m: "Bootstrap"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:04.827 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ãœ Swagger documentation: http://localhost:3000/docs[39m
    [35mcontext[39m: "Bootstrap"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.493 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-test-1769044986409@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.507 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
 PASS   backend-e2e  apps/backend-e2e/src/backend/backend.spec.ts
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.514 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["audit-test-1769044986409@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769044986425@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.534 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.534 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","audit-test-1769044986409@example.com","CREATE","User","97f91b07-dd8e-45ef-acba-dc3c343dba3f",null,"{\"email\":\"audit-test-1769044986409@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"createdAt\":\"2026-01-22T04:23:06.139Z\",\"updatedAt\":\"2026-01-22T04:23:06.139Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.539 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: test-1769044986425@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["test-1769044986425@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.546 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 2a398f4b-7f28-4e1b-8562-8fe56fa90b63[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.550 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 3fe170f1-86bf-405a-a1f2-1d6c1da530e8[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.551 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 3fe170f1-86bf-405a-a1f2-1d6c1da530e8[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["3fe170f1-86bf-405a-a1f2-1d6c1da530e8","test-1769044986425@example.com","CREATE","User","3fe170f1-86bf-405a-a1f2-1d6c1da530e8",null,"{\"email\":\"test-1769044986425@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"3fe170f1-86bf-405a-a1f2-1d6c1da530e8\",\"createdAt\":\"2026-01-22T04:23:06.160Z\",\"updatedAt\":\"2026-01-22T04:23:06.160Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-test-1769044986409@example.com"][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.557 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.558 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.559 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.561 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: a125e6d3-4789-4dc3-a5ef-e337cefc40e4[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","audit-test-1769044986409@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","decc571c2b851e421d420fae41e6e5aa9a6780b5aaeec6844d24069f81348937","2026-01-29T01:23:06.568Z",null,null,"2026-01-22T04:23:06.139Z","2026-01-22T01:23:06.568Z",null,1,"97f91b07-dd8e-45ef-acba-dc3c343dba3f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.567 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.568 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769044986569@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.572 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.575 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: test-1769044986569@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f"][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["test-1769044986569@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f"][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.585 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.585 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Thu Jan 22 2026 16:03:00 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.586 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:23:06 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.586 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.587 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","audit-test-1769044986409@example.com","LOGIN","User","97f91b07-dd8e-45ef-acba-dc3c343dba3f",null,"{\"email\":\"audit-test-1769044986409@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.589 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 81875d74-bbdc-48ce-ae50-fcb6816b1490[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.589 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 81875d74-bbdc-48ce-ae50-fcb6816b1490[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["81875d74-bbdc-48ce-ae50-fcb6816b1490","test-1769044986569@example.com","CREATE","User","81875d74-bbdc-48ce-ae50-fcb6816b1490",null,"{\"email\":\"test-1769044986569@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"81875d74-bbdc-48ce-ae50-fcb6816b1490\",\"createdAt\":\"2026-01-22T04:23:06.194Z\",\"updatedAt\":\"2026-01-22T04:23:06.194Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.595 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 68c940c1-96d6-44cd-8254-cd911bc8bb70[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.595 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.598 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 810e3699-f173-4647-9415-7199464850ca[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.602 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769044986569@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.605 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-create-user-1769044986601@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.607 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar usuâ”œÃ­rio: Email jâ”œÃ­ cadastrado[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.646 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÂ­Æ’Ã„Â» Business Exception: CONFLICT - Email jâ”œÃ­ cadastrado[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST",
      "statusCode": 409
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.648 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: audit-create-user-1769044986601@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["audit-create-user-1769044986601@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.660 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: f3214eb7-bd5b-46a0-a218-9ffa52c8bd1f[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.660 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio f3214eb7-bd5b-46a0-a218-9ffa52c8bd1f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["f3214eb7-bd5b-46a0-a218-9ffa52c8bd1f","audit-create-user-1769044986601@example.com","CREATE","User","f3214eb7-bd5b-46a0-a218-9ffa52c8bd1f",null,"{\"email\":\"audit-create-user-1769044986601@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"f3214eb7-bd5b-46a0-a218-9ffa52c8bd1f\",\"createdAt\":\"2026-01-22T04:23:06.263Z\",\"updatedAt\":\"2026-01-22T04:23:06.263Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.671 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: b91c0496-451b-4735-af60-232ac17369a5[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.679 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.679 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.680 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Audit Test Customer",7500,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.692 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","6aedb78f-04fc-490c-abc8-63836add4854",null,"{\"name\":\"Audit Test Customer\",\"salary\":7500,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"6aedb78f-04fc-490c-abc8-63836add4854\",\"createdAt\":\"2026-01-22T04:23:06.294Z\",\"updatedAt\":\"2026-01-22T04:23:06.294Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.701 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 3b4f1f80-9245-467e-ae46-58ff1e92b593[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.706 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.707 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.707 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Customer 1",5000,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.713 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["login-test-1769044986712@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.715 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.716 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","24daa384-e0b5-4db5-87ff-966e90f96f25",null,"{\"name\":\"Customer 1\",\"salary\":5000,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"24daa384-e0b5-4db5-87ff-966e90f96f25\",\"createdAt\":\"2026-01-22T04:23:06.320Z\",\"updatedAt\":\"2026-01-22T04:23:06.320Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["login-test-1769044986712@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.723 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 42ef67ef-3a77-4aa9-ac48-40e79931c882[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.728 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.728 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.729 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.730 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: c96c0e71-6585-4836-a6fe-083e4aa69ee5[39m
    [35mcontext[39m: "CreateUserUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.730 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio c96c0e71-6585-4836-a6fe-083e4aa69ee5[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Customer 2",6000,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["c96c0e71-6585-4836-a6fe-083e4aa69ee5","login-test-1769044986712@example.com","CREATE","User","c96c0e71-6585-4836-a6fe-083e4aa69ee5",null,"{\"email\":\"login-test-1769044986712@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"c96c0e71-6585-4836-a6fe-083e4aa69ee5\",\"createdAt\":\"2026-01-22T04:23:06.328Z\",\"updatedAt\":\"2026-01-22T04:23:06.328Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.738 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","7a5f9ad0-e305-4c7e-8838-389afe5ca963",null,"{\"name\":\"Customer 2\",\"salary\":6000,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"7a5f9ad0-e305-4c7e-8838-389afe5ca963\",\"createdAt\":\"2026-01-22T04:23:06.341Z\",\"updatedAt\":\"2026-01-22T04:23:06.341Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.741 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 148d08e0-a030-40f5-ae60-c4e88f86cfff[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["login-test-1769044986712@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.746 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["c96c0e71-6585-4836-a6fe-083e4aa69ee5"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.746 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.747 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.748 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 10c7fae2-6ab3-4d83-bbf9-b5253b3a40b9[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.750 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["c96c0e71-6585-4836-a6fe-083e4aa69ee5","login-test-1769044986712@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","187568bef22fc32b3e40e8993c579e39f4d24a6a32a5b9d27d9d7d1caf661127","2026-01-29T01:23:06.753Z",null,null,"2026-01-22T04:23:06.328Z","2026-01-22T01:23:06.753Z",null,1,"c96c0e71-6585-4836-a6fe-083e4aa69ee5"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.752 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.756 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.756 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.757 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.757 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.758 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/stats - usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.758 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Iniciando obtenâ”œÂºâ”œÃºo de estatâ”œÂ¡sticas para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["c96c0e71-6585-4836-a6fe-083e4aa69ee5"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["c96c0e71-6585-4836-a6fe-083e4aa69ee5"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"audit_logs"[0m [37m"AuditLog"[0m [94mWHERE[0m [37m"AuditLog"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.773 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.773 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Thu Jan 22 2026 16:03:00 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.773 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:23:06 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.773 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.773 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio c96c0e71-6585-4836-a6fe-083e4aa69ee5[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.775 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Estatâ”œÂ¡sticas obtidas com sucesso - Usuâ”œÃ­rios: 52, Clientes: 68, Auditorias: 126[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["c96c0e71-6585-4836-a6fe-083e4aa69ee5","login-test-1769044986712@example.com","LOGIN","User","c96c0e71-6585-4836-a6fe-083e4aa69ee5",null,"{\"email\":\"login-test-1769044986712@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [32m1[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.782 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: e53f8fe1-c299-456c-a7cd-e42496f9e1d9[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.782 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: login-test-1769044986712@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.788 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["wrong-pwd-1769044986784@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.788 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.788 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.790 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Concurrent Customer 0",5000,null,"ACTIVE",null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.794 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.794 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.794 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.796 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.797 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.797 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.799 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.799 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.800 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.802 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.802 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044986409@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.802 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Concurrent Customer 1",5100,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Concurrent Customer 2",5200,null,"ACTIVE",null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.805 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: wrong-pwd-1769044986784@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["wrong-pwd-1769044986784@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.811 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","616c0cab-678c-41c6-b426-adaad7d214d3",null,"{\"name\":\"Concurrent Customer 0\",\"salary\":5000,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"616c0cab-678c-41c6-b426-adaad7d214d3\",\"createdAt\":\"2026-01-22T04:23:06.398Z\",\"updatedAt\":\"2026-01-22T04:23:06.398Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.815 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.817 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.818 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 06d6a177-c4ff-49bd-a420-e11ca3a2e247[39m
    [35mcontext[39m: "CreateUserUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.818 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 06d6a177-c4ff-49bd-a420-e11ca3a2e247[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","70ae2055-5d38-48a8-aa89-a7defa08205d",null,"{\"name\":\"Concurrent Customer 2\",\"salary\":5200,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"70ae2055-5d38-48a8-aa89-a7defa08205d\",\"createdAt\":\"2026-01-22T04:23:06.406Z\",\"updatedAt\":\"2026-01-22T04:23:06.406Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","d4a6d482-9f6d-4935-92bc-de87797bbf6e",null,"{\"name\":\"Concurrent Customer 1\",\"salary\":5100,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"d4a6d482-9f6d-4935-92bc-de87797bbf6e\",\"createdAt\":\"2026-01-22T04:23:06.403Z\",\"updatedAt\":\"2026-01-22T04:23:06.403Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["06d6a177-c4ff-49bd-a420-e11ca3a2e247","wrong-pwd-1769044986784@example.com","CREATE","User","06d6a177-c4ff-49bd-a420-e11ca3a2e247",null,"{\"email\":\"wrong-pwd-1769044986784@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"06d6a177-c4ff-49bd-a420-e11ca3a2e247\",\"createdAt\":\"2026-01-22T04:23:06.413Z\",\"updatedAt\":\"2026-01-22T04:23:06.413Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.822 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 77317f79-87aa-44e8-92f6-86a494c0ee7f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Concurrent Customer 3",5300,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","Concurrent Customer 4",5400,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.829 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 2c041d9c-bba9-483d-a660-3f9e6373471d[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.833 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.834 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 12584a56-ec62-4200-8226-28ee0cbb98cf[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.835 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 97f91b07-dd8e-45ef-acba-dc3c343dba3f[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.835 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: e73cad05-c512-45f3-a75f-92da8ee7b043[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","662e9069-c6c5-4199-b6b6-5b5b2d679b31",null,"{\"name\":\"Concurrent Customer 3\",\"salary\":5300,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"662e9069-c6c5-4199-b6b6-5b5b2d679b31\",\"createdAt\":\"2026-01-22T04:23:06.426Z\",\"updatedAt\":\"2026-01-22T04:23:06.426Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["97f91b07-dd8e-45ef-acba-dc3c343dba3f","","CREATE","Customer","5a922b0d-f73e-466d-bf1d-3d2f54dbb541",null,"{\"name\":\"Concurrent Customer 4\",\"salary\":5400,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"97f91b07-dd8e-45ef-acba-dc3c343dba3f\",\"id\":\"5a922b0d-f73e-466d-bf1d-3d2f54dbb541\",\"createdAt\":\"2026-01-22T04:23:06.426Z\",\"updatedAt\":\"2026-01-22T04:23:06.426Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["wrong-pwd-1769044986784@example.com"][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.844 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”Ã˜Ã® Login attempt com senha incorreta: wrong-pwd-1769044986784@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.845 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Email ou senha invâ”œÃ­lidos[39m
    [35mcontext[39m: {
      "path": "/api/auth/login",
      "method": "POST"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.848 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 38df6515-9688-4d20-a18e-949263785841[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.850 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["refresh-test-1769044986848@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.852 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 9fd3bddc-9a8f-4e64-9586-913c10a4dac9[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.855 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["refresh-test-1769044986848@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
 PASS   backend-e2e  apps/backend-e2e/src/backend/audit-and-health.spec.ts
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.863 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 5b626b5d-8faa-4581-abf1-df9886c4ac90[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.864 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 5b626b5d-8faa-4581-abf1-df9886c4ac90[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90","refresh-test-1769044986848@example.com","CREATE","User","5b626b5d-8faa-4581-abf1-df9886c4ac90",null,"{\"email\":\"refresh-test-1769044986848@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"5b626b5d-8faa-4581-abf1-df9886c4ac90\",\"createdAt\":\"2026-01-22T04:23:06.461Z\",\"updatedAt\":\"2026-01-22T04:23:06.461Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.872 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 937b7e04-319b-41a0-95bd-9b84124b7045[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["refresh-test-1769044986848@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.878 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.878 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.878 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.881 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90","refresh-test-1769044986848@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","26c406b406ada6009630387fc3bc6780b441f865b445107af1e0082a932fbea9","2026-01-29T01:23:06.882Z",null,null,"2026-01-22T04:23:06.461Z","2026-01-22T01:23:06.882Z",null,1,"5b626b5d-8faa-4581-abf1-df9886c4ac90"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.882 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.896 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.896 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Thu Jan 22 2026 16:03:00 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.896 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:23:06 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.897 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.897 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 5b626b5d-8faa-4581-abf1-df9886c4ac90[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90","refresh-test-1769044986848@example.com","LOGIN","User","5b626b5d-8faa-4581-abf1-df9886c4ac90",null,"{\"email\":\"refresh-test-1769044986848@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.906 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 1567c20f-df6a-492d-850f-1dc863bc3eae[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.906 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.909 -0300 Â­Æ’Ã¶Âº DEBUG: [36mPOST /auth/refresh chamado[39m
    [35mcontext[39m: "AuthController"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.911 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¤ Iniciando refresh para cliente: 5b626b5d-8faa-4581-abf1-df9886c4ac90[39m
    [35mcontext[39m: "RefreshTokenUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token validado com sucesso[39m
    [35mcontext[39m: "RefreshTokenUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90","refresh-test-1769044986848@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","f736c652cc328adfb0a0fe508545e0ed2609f7e79bf3bf3290ae1ba8a700eb62","2026-01-29T01:23:06.915Z",null,null,"2026-01-22T04:23:06.461Z","2026-01-22T04:23:06.495Z",null,2,"5b626b5d-8faa-4581-abf1-df9886c4ac90"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.914 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Novo Access Token gerado[39m
    [35mcontext[39m: "RefreshTokenUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.924 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Novo Refresh Token hash salvo[39m
    [35mcontext[39m: "RefreshTokenUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.924 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Tokens rotacionados com sucesso[39m
    [35mcontext[39m: "RefreshTokenUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.924 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.REFRESH_TOKEN para usuâ”œÃ­rio 5b626b5d-8faa-4581-abf1-df9886c4ac90[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["5b626b5d-8faa-4581-abf1-df9886c4ac90","refresh-test-1769044986848@example.com","REFRESH_TOKEN","User","5b626b5d-8faa-4581-abf1-df9886c4ac90",null,null,null,"unknown","unknown","/api/auth/refresh","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.932 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: a3ed1408-6ede-40fc-9ffd-1464f599ecd8[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.933 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de refresh token registrada: refresh-test-1769044986848@example.com[39m
    [35mcontext[39m: "RefreshTokenUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.939 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["customer-test-1769044986938@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.942 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["customer-test-1769044986938@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.948 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: f725ce96-8681-4303-ba3e-e50cc2ca73f9[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.949 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio f725ce96-8681-4303-ba3e-e50cc2ca73f9[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9","customer-test-1769044986938@example.com","CREATE","User","f725ce96-8681-4303-ba3e-e50cc2ca73f9",null,"{\"email\":\"customer-test-1769044986938@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"f725ce96-8681-4303-ba3e-e50cc2ca73f9\",\"createdAt\":\"2026-01-22T04:23:06.543Z\",\"updatedAt\":\"2026-01-22T04:23:06.543Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.957 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: a819a946-3777-4724-a431-1fe394dae09e[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["customer-test-1769044986938@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.962 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.962 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.963 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.966 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9","customer-test-1769044986938@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","0e03d256ccaa493beaf2e094e4d247c9876275bd4e003e4ddf40b703789b00f7","2026-01-29T01:23:06.968Z",null,null,"2026-01-22T04:23:06.543Z","2026-01-22T01:23:06.968Z",null,1,"f725ce96-8681-4303-ba3e-e50cc2ca73f9"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.967 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.981 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.981 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Thu Jan 22 2026 16:03:00 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.982 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:23:06 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.982 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.982 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio f725ce96-8681-4303-ba3e-e50cc2ca73f9[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9","customer-test-1769044986938@example.com","LOGIN","User","f725ce96-8681-4303-ba3e-e50cc2ca73f9",null,"{\"email\":\"customer-test-1769044986938@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.990 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: da21e833-469d-4571-bb14-a5b71f495080[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.990 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.996 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.996 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:06.997 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: f725ce96-8681-4303-ba3e-e50cc2ca73f9[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9","Joâ”œÃºo Silva",5000.5,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.005 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio f725ce96-8681-4303-ba3e-e50cc2ca73f9[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["f725ce96-8681-4303-ba3e-e50cc2ca73f9","","CREATE","Customer","0b04875e-8fee-46a2-bc13-d9b4e5b41b1f",null,"{\"name\":\"Joâ”œÃºo Silva\",\"salary\":5000.5,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"f725ce96-8681-4303-ba3e-e50cc2ca73f9\",\"id\":\"0b04875e-8fee-46a2-bc13-d9b4e5b41b1f\",\"createdAt\":\"2026-01-22T04:23:06.596Z\",\"updatedAt\":\"2026-01-22T04:23:06.596Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.015 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 6994187f-e1e8-4ca1-9e61-898245021c09[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.021 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"customer_id"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"customer_userId"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"customer_name"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"customer_salary"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"customer_company"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"customer_status"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"customer_createdAt"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"customer_updatedAt"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mORDER BY[0m [37m"customer"[0m[37m.[0m[37m"name"[0m [94mASC[0m [94mLIMIT[0m [32m10[0m [37mOFFSET[0m [32m0[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.021 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.022 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã¯ Listando clientes: skip=0, take=10, search=undefined, searchField=status[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.035 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["0b04875e-8fee-46a2-bc13-d9b4e5b41b1f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.035 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.036 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¬ Buscando cliente: 0b04875e-8fee-46a2-bc13-d9b4e5b41b1f[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.044 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["non-existent-id"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.044 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044986938@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.044 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¬ Buscando cliente: non-existent-id[39m
    [35mcontext[39m: "CustomerController"
[4m[31mquery failed:[39m[24m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["non-existent-id"][0m
[4m[31merror:[39m[24m error: invalid input syntax for type uuid: "non-existent-id"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.048 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao buscar cliente: QueryFailedError: invalid input syntax for type uuid: "non-existent-id"[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.097 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: invalid input syntax for type uuid: "non-existent-id"[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers/non-existent-id",
      "method": "GET"
    }
    [35mtrace[39m: "QueryFailedError: invalid input syntax for type uuid: \"non-existent-id\"\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SelectQueryBuilder.loadRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3868:25)\n    at SelectQueryBuilder.executeEntitiesAndRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3614:26)\n    at SelectQueryBuilder.getRawAndEntities (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1671:29)\n    at SelectQueryBuilder.getOne (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1698:25)\n    at FindCustomerByIdUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\find-customer-by-id.ucase.ts:9:1)\n    at CustomerController.findOne (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:51:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.102 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dashboard-test-1769044987100@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.105 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["dashboard-test-1769044987100@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.112 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.112 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53","dashboard-test-1769044987100@example.com","CREATE","User","7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53",null,"{\"email\":\"dashboard-test-1769044987100@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53\",\"createdAt\":\"2026-01-22T04:23:06.699Z\",\"updatedAt\":\"2026-01-22T04:23:06.699Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.120 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: ff4ac1ec-c2c0-4ebc-89ac-c276d7465885[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dashboard-test-1769044987100@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.125 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.125 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.125 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.129 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53","dashboard-test-1769044987100@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","7783fb5b3be930aeba74351122b29cee1afefd2b3987ec43a7b38e92bc909f95","2026-01-29T01:23:07.130Z",null,null,"2026-01-22T04:23:06.699Z","2026-01-22T01:23:07.130Z",null,1,"7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.129 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.143 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.143 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Thu Jan 22 2026 18:49:40 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.143 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:23:07 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.143 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.144 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53","dashboard-test-1769044987100@example.com","LOGIN","User","7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53",null,"{\"email\":\"dashboard-test-1769044987100@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.151 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 9140c749-00d9-4faa-a94f-9cd3978300df[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.151 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.154 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"audit_logs"[0m [37m"AuditLog"[0m [94mWHERE[0m [37m"AuditLog"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.154 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.155 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.155 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.155 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/stats - usuâ”œÃ­rio: 7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.155 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Iniciando obtenâ”œÂºâ”œÃºo de estatâ”œÂ¡sticas para usuâ”œÃ­rio: 7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.158 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Estatâ”œÂ¡sticas obtidas com sucesso - Usuâ”œÃ­rios: 56, Clientes: 74, Auditorias: 141[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.161 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mDATE_TRUNC[0m[37m([0m[37m'day'[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m[37m)[0m [94mas[0m [37mday[0m[37m,[0m [95mCOUNT[0m[37m([0m[37m"customer"[0m[37m.[0m[37m"id"[0m[37m)[0m[37m:[0m[37m:[0m[37mint[0m [94mas[0m [37mtotal[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mGROUP BY[0m [95mDATE_TRUNC[0m[37m([0m[37m'day'[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m[37m)[0m [94mORDER BY[0m [37mday[0m [94mASC[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.161 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.162 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.162 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: dashboard-test-1769044987100@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.163 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/customer-trend/day (days: 30) - usuâ”œÃ­rio: 7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.163 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetCustomerTrendByDayUseCase] Fetching customer trend for 30 days - usuâ”œÃ­rio: 7c4c3c9b-1bc1-49e5-aaf2-e20e304bed53[39m
    [35mcontext[39m: "GetCustomerTrendByDayUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.167 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetCustomerTrendByDayUseCase] Successfully fetched 2 days of data[39m
    [35mcontext[39m: "GetCustomerTrendByDayUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.170 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Nâ”œÃºo autorizado[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "GET"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.173 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”Ã˜Ã® JWT invâ”œÃ­lido: jwt malformed[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.173 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Token invâ”œÃ­lido[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "GET"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.176 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.177 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 400 - email must be an email[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.180 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:23:07.181 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 400 - password must be longer than or equal to 8 characters[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST"
    }
 FAIL   backend-e2e  apps/backend-e2e/src/backend/complete-flow.spec.ts
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ User Registration & Authentication Ã”Ã‡â•‘ should refresh token successfully
    expect(received).toHaveProperty(path)
    Expected path: "refreshToken"
    Received path: []
    Received value: {"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1YjYyNmI1ZC04ZmFhLTQ1ODEtYWJmMS1kZjk4ODZjNGFjOTAiLCJlbWFpbCI6InJlZnJlc2gtdGVzdC0xNzY5MDQ0OTg2ODQ4QGV4YW1wbGUuY29tIiwibmFtZSI6InJlZnJlc2gtdGVzdC0xNzY5MDQ0OTg2ODQ4QGV4YW1wbGUuY29tIiwiaWF0IjoxNzY5MDQ0OTg2LCJleHAiOjE3NjkwNDQ5ODl9.-o3MJMYjaPencnQi4hOoRZbbcu8gj844rMS5Dm6TdZk"}

      91 |       expect(refreshResponse.status).toBe(200);
      92 |       expect(refreshResponse.data).toHaveProperty('accessToken');
    > 93 |       expect(refreshResponse.data).toHaveProperty('refreshToken');
         |                                    ^
      94 |     });
      95 |   });
      96 |

      at Object.toHaveProperty (src/backend/complete-flow.spec.ts:93:36)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should get all customers
    expect(received).toBe(expected) // Object.is equality
    Expected: true
    Received: false

      139 |
      140 |       expect(response.status).toBe(200);
    > 141 |       expect(Array.isArray(response.data)).toBe(true);
          |                                            ^
      142 |     });
      143 |
      144 |     it('should get customer by id', async () => {

      at Object.toBe (src/backend/complete-flow.spec.ts:141:44)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should fail to get non-existent customer
    expect(received).toBe(expected) // Object.is equality
    Expected: 404
    Received: 500

      158 |         fail('Should have thrown 404');
      159 |       } catch (error: any) {
    > 160 |         expect(error.response?.status).toBe(404);
          |                                        ^
      161 |       }
      162 |     });
      163 |   });

      at Object.toBe (src/backend/complete-flow.spec.ts:160:40)
Test Suites: 1 failed, 2 passed, 3 total
Tests:       3 failed, 18 passed, 21 total
Snapshots:   0 total
Time:        1.934 s, estimated 2 s
Ran all test suites.
Attempting to close port 3000
[7m[1m[36m NX [39m[22m[27m [1mProcess exited with code 1, waiting for changes to restart...[22m
Port 3000 successfully closed
Tearing down...



 NX   Running target e2e for project backend-e2e and 2 tasks it depends on failed

Failed tasks:

- backend-e2e:e2e

Hint: run the command with --verbose for more details.

