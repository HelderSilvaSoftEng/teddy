
> @teddy-challenger/source@0.0.0 backend:e2e
> npx nx e2e backend-e2e


 NX   Running target e2e for project backend-e2e and 2 tasks it depends on:



> nx run backend:build

> webpack-cli build --node-env=production

[1m[33mWARNING[39m[22m in [1m./node_modules/@opentelemetry/sdk-node/build/src/TracerProviderWithEnvExporter.js[39m[22m [1m[32m89:39-80[39m[22m
[1mModule [1m[31mnot found[39m[22m[1m: [1m[31mError[39m[22m[1m: Can't resolve '@opentelemetry/exporter-jaeger' in 'C:\Projects\Desafio\teddy-challenger\apps\backend\node_modules\@opentelemetry\sdk-node\build\src'[39m[22m

webpack compiled with [1m[33m1 warning[39m[22m (b6fe3520b0d9555e)

> nx run backend:serve:development


> nx run backend-e2e:e2e

NX Daemon is not running. Node process will not restart automatically after file changes.
Setting up...
[2m> [22m[2mnx run[22m backend:build:development
[2m> [22mwebpack-cli build --node-env=development
[1m[33mWARNING[39m[22m in [1m./node_modules/@opentelemetry/sdk-node/build/src/TracerProviderWithEnvExporter.js[39m[22m [1m[32m89:39-80[39m[22m
[1mModule [1m[31mnot found[39m[22m[1m: [1m[31mError[39m[22m[1m: Can't resolve '@opentelemetry/exporter-jaeger' in 'C:\Projects\Desafio\teddy-challenger\apps\backend\node_modules\@opentelemetry\sdk-node\build\src'[39m[22m
webpack compiled with [1m[33m1 warning[39m[22m (b6fe3520b0d9555e)
[0m[7m[1m[32m NX [39m[22m[27m[0m  [32mSuccessfully ran target [1mbuild[22m for project backend[39m
Debugger listening on ws://localhost:9229/c5216505-9090-4296-bf30-125181a05264
Debugger listening on ws://localhost:9229/c5216505-9090-4296-bf30-125181a05264
For help, see: https://nodejs.org/en/docs/inspector

[dotenv@17.2.3] injecting env (0) from .env -- tip: Ã”ÃœÃ–Â´Â©Ã…  write to custom object with { processEnv: myObject }
[95m[Nest] 25356  - [39m21/01/2026, 22:09:35 [95m  DEBUG[39m [38;5;3m[TypeOrmConfig] [39m[95mDatabase Config: {"host":"localhost","port":5432,"database":"teddy_db","synchronize":true}[39m
Â­Æ’Ã¶Ã¬ [TELEMETRY] Inicializando OpenTelemetry com endpoint: http://localhost:4318/v1/traces
Ã”Â£Ã  [TELEMETRY] OpenTelemetry iniciado com sucesso
Â­Æ’Ã¶Ã¬ [MAIN] Iniciando NestFactory.create...
[90m[4mquery:[24m[39m [94mSELECT[0m [95mversion[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_schema[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mCREATE[0m [37mEXTENSION[0m [94mIF[0m [94mNOT[0m [94mEXISTS[0m [37m"uuid-ossp"[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_schema[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_database[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"table_schema"[0m[37m,[0m [37m"table_name"[0m[37m,[0m [95mobj_description[0m[37m([0m[37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37m"table_schema"[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37m"table_name"[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37mregclass[0m[37m,[0m [37m'pg_class'[0m[37m)[0m [94mAS[0m [37mtable_comment[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"tables"[0m [94mWHERE[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [94mTRUE[0m [94mFROM[0m [37minformation_schema[0m[37m.[0m[37mcolumns[0m [94mWHERE[0m [37mtable_name[0m [37m=[0m [37m'pg_class'[0m [94mand[0m [37mcolumn_name[0m [37m=[0m [37m'relispartition'[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37mcolumns[0m[37m.[0m[37m*[0m[37m,[0m [37mpg_catalog[0m[37m.[0m[95mcol_description[0m[37m([0m[37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37mtable_catalog[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37mtable_schema[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37mtable_name[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37mregclass[0m[37m:[0m[37m:[0m[37moid[0m[37m,[0m [37mordinal_position[0m[37m)[0m [94mAS[0m [37mdescription[0m[37m,[0m [37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37m"udt_schema"[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37m"udt_name"[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37m"regtype"[0m[37m:[0m[37m:[0m[94mtext[0m [94mAS[0m [37m"regtype"[0m[37m,[0m [37mpg_catalog[0m[37m.[0m[95mformat_type[0m[37m([0m[37m"col_attr"[0m[37m.[0m[37m"atttypid"[0m[37m,[0m [37m"col_attr"[0m[37m.[0m[37m"atttypmod"[0m[37m)[0m [94mAS[0m [37m"format_type"[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"columns"[0m [94mLEFT JOIN[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_attribute"[0m [94mAS[0m [37m"col_attr"[0m [94mON[0m [37m"col_attr"[0m[37m.[0m[37m"attname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"column_name"[0m [94mAND[0m [37m"col_attr"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m([0m [94mSELECT[0m [37m"cls"[0m[37m.[0m[37m"oid"[0m [94mFROM[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_class"[0m [94mAS[0m [37m"cls"[0m [94mLEFT JOIN[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_namespace"[0m [94mAS[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cls"[0m[37m.[0m[37m"relnamespace"[0m [94mWHERE[0m [37m"cls"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"table_name"[0m [94mAND[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"table_schema"[0m [37m)[0m [94mWHERE[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"cnst"[0m[37m.[0m[37m"conname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [95mpg_get_constraintdef[0m[37m([0m[37m"cnst"[0m[37m.[0m[37m"oid"[0m[37m)[0m [94mAS[0m [37m"expression"[0m[37m,[0m [94mCASE[0m [37m"cnst"[0m[37m.[0m[37m"contype"[0m [94mWHEN[0m [37m'p'[0m [94mTHEN[0m [37m'PRIMARY'[0m [94mWHEN[0m [37m'u'[0m [94mTHEN[0m [37m'UNIQUE'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CHECK'[0m [94mWHEN[0m [37m'x'[0m [94mTHEN[0m [37m'EXCLUDE'[0m [94mEND[0m [94mAS[0m [37m"constraint_type"[0m[37m,[0m [37m"a"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m [94mFROM[0m [37m"pg_constraint"[0m [37m"cnst"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"t"[0m [94mON[0m [37m"t"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"conrelid"[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"connamespace"[0m [94mLEFT JOIN[0m [37m"pg_attribute"[0m [37m"a"[0m [94mON[0m [37m"a"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"conrelid"[0m [94mAND[0m [37m"a"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [94mANY[0m [37m([0m[37m"cnst"[0m[37m.[0m[37m"conkey"[0m[37m)[0m [94mWHERE[0m [37m"t"[0m[37m.[0m[37m"relkind"[0m [94mIN[0m [37m([0m[37m'r'[0m[37m,[0m [37m'p'[0m[37m)[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"i"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [37m"a"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m[37m,[0m [94mCASE[0m [37m"ix"[0m[37m.[0m[37m"indisunique"[0m [94mWHEN[0m [37m't'[0m [94mTHEN[0m [37m'TRUE'[0m [94mELSE[0m[37m'FALSE'[0m [94mEND[0m [94mAS[0m [37m"is_unique"[0m[37m,[0m [95mpg_get_expr[0m[37m([0m[37m"ix"[0m[37m.[0m[37m"indpred"[0m[37m,[0m [37m"ix"[0m[37m.[0m[37m"indrelid"[0m[37m)[0m [94mAS[0m [37m"condition"[0m[37m,[0m [37m"types"[0m[37m.[0m[37m"typname"[0m [94mAS[0m [37m"type_name"[0m[37m,[0m [37m"am"[0m[37m.[0m[37m"amname"[0m [94mAS[0m [37m"index_type"[0m [94mFROM[0m [37m"pg_class"[0m [37m"t"[0m [94mINNER JOIN[0m [37m"pg_index"[0m [37m"ix"[0m [94mON[0m [37m"ix"[0m[37m.[0m[37m"indrelid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"a"[0m [94mON[0m [37m"a"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"oid"[0m  [94mAND[0m [37m"a"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [94mANY[0m [37m([0m[37m"ix"[0m[37m.[0m[37m"indkey"[0m[37m)[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"relnamespace"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"i"[0m [94mON[0m [37m"i"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"ix"[0m[37m.[0m[37m"indexrelid"[0m [94mINNER JOIN[0m [37m"pg_type"[0m [37m"types"[0m [94mON[0m [37m"types"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"a"[0m[37m.[0m[37m"atttypid"[0m [94mINNER JOIN[0m [37m"pg_am"[0m [37m"am"[0m [94mON[0m [37m"i"[0m[37m.[0m[37m"relam"[0m [37m=[0m [37m"am"[0m[37m.[0m[37m"oid"[0m [94mLEFT JOIN[0m [37m"pg_constraint"[0m [37m"cnst"[0m [94mON[0m [37m"cnst"[0m[37m.[0m[37m"conname"[0m [37m=[0m [37m"i"[0m[37m.[0m[37m"relname"[0m [94mWHERE[0m [37m"t"[0m[37m.[0m[37m"relkind"[0m [94mIN[0m [37m([0m[37m'r'[0m[37m,[0m [37m'p'[0m[37m)[0m [94mAND[0m [37m"cnst"[0m[37m.[0m[37m"contype"[0m [94mIS NULL[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"con"[0m[37m.[0m[37m"conname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"att2"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m[37m,[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"referenced_table_schema"[0m[37m,[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"referenced_table_name"[0m[37m,[0m [37m"att"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"referenced_column_name"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"confdeltype"[0m [94mAS[0m [37m"on_delete"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"confupdtype"[0m [94mAS[0m [37m"on_update"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"condeferrable"[0m [94mAS[0m [37m"deferrable"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"condeferred"[0m [94mAS[0m [37m"deferred"[0m [94mFROM[0m [37m([0m [94mSELECT[0m [95mUNNEST[0m [37m([0m[37m"con1"[0m[37m.[0m[37m"conkey"[0m[37m)[0m [94mAS[0m [37m"parent"[0m[37m,[0m [95mUNNEST[0m [37m([0m[37m"con1"[0m[37m.[0m[37m"confkey"[0m[37m)[0m [94mAS[0m [37m"child"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"confrelid"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"conrelid"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"conname"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"contype"[0m[37m,[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m[37m,[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"condeferrable"[0m[37m,[0m [94mCASE[0m [94mWHEN[0m [37m"con1"[0m[37m.[0m[37m"condeferred"[0m [94mTHEN[0m [37m'INITIALLY DEFERRED'[0m [94mELSE[0m [37m'INITIALLY IMMEDIATE'[0m [94mEND[0m [94mas[0m [37mcondeferred[0m[37m,[0m [94mCASE[0m [37m"con1"[0m[37m.[0m[37m"confdeltype"[0m [94mWHEN[0m [37m'a'[0m [94mTHEN[0m [37m'NO ACTION'[0m [94mWHEN[0m [37m'r'[0m [94mTHEN[0m [37m'RESTRICT'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CASCADE'[0m [94mWHEN[0m [37m'n'[0m [94mTHEN[0m [37m'SET NULL'[0m [94mWHEN[0m [37m'd'[0m [94mTHEN[0m [37m'SET DEFAULT'[0m [94mEND[0m [94mas[0m [37m"confdeltype"[0m[37m,[0m [94mCASE[0m [37m"con1"[0m[37m.[0m[37m"confupdtype"[0m [94mWHEN[0m [37m'a'[0m [94mTHEN[0m [37m'NO ACTION'[0m [94mWHEN[0m [37m'r'[0m [94mTHEN[0m [37m'RESTRICT'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CASCADE'[0m [94mWHEN[0m [37m'n'[0m [94mTHEN[0m [37m'SET NULL'[0m [94mWHEN[0m [37m'd'[0m [94mTHEN[0m [37m'SET DEFAULT'[0m [94mEND[0m [94mas[0m [37m"confupdtype"[0m [94mFROM[0m [37m"pg_class"[0m [37m"cl"[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"relnamespace"[0m [37m=[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_constraint"[0m [37m"con1"[0m [94mON[0m [37m"con1"[0m[37m.[0m[37m"conrelid"[0m [37m=[0m [37m"cl"[0m[37m.[0m[37m"oid"[0m [94mWHERE[0m [37m"con1"[0m[37m.[0m[37m"contype"[0m [37m=[0m [37m'f'[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m [37m)[0m [37m"con"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"att"[0m [94mON[0m [37m"att"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"confrelid"[0m [94mAND[0m [37m"att"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"child"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"cl"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"confrelid"[0m  [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relispartition"[0m [37m=[0m [37m'f'[0m[94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"relnamespace"[0m [37m=[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"att2"[0m [94mON[0m [37m"att2"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"conrelid"[0m [94mAND[0m [37m"att2"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"parent"[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"tables"[0m [94mWHERE[0m [37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'typeorm_metadata'[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Ã”Â£Ã  [MAIN] NestFactory.create completo
Â­Æ’Ã¶Ã¬ [MAIN] Iniciando app.listen...
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.892 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mUnsupported route path: "/api/*". In previous versions, the symbols ?, *, and + were used to denote optional or repeating path parameters. The latest version of "path-to-regexp" now requires the use of named parameters. For example, instead of using a route like /users/* to capture all routes starting with "/users", you should use /users/*path. For more details, refer to the migration guide. Attempting to auto-convert...[39m
    [35mcontext[39m: "LegacyRouteConverter"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.898 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mUserController {/api/v1/users}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.903 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.905 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.906 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.907 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, PUT} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.908 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, DELETE} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.909 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id/password, PATCH} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.909 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mCustomerController {/api/v1/customers}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.911 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.911 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.912 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, PUT} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, DELETE} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mAuthController {/api/auth}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.914 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/login, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.915 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/refresh, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.915 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/logout, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.916 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/me, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.916 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/recovery-password, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.917 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/reset-password, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.917 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/increment-access, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.917 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mHealthController {/api/health}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.918 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.918 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health/live, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.918 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health/ready, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.918 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMetricsController {/api/metrics}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.918 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/metrics, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.919 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mDashboardController {/api/dashboard}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.919 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/stats, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.919 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/recent-customers, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.920 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/customer-trend/month, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:40.920 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/customer-trend/day, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@teddy.com"][0m
Ã”Â£Ã´ Admin user already exists
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@teddy.com"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"userId"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [90m-- PARAMETERS: ["56687d17-70a5-4b71-8791-0ebca642404b"][0m
Ã”Â£Ã´ Customers already exist (29 found)
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:42.958 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mNest application successfully started[39m
    [35mcontext[39m: "NestApplication"
Ã”Â£Ã  [MAIN] app.listen completo
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:42.962 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’ÃœÃ‡ Application is running on: http://localhost:3000/api[39m
    [35mcontext[39m: "Bootstrap"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:42.962 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ãœ Swagger documentation: http://localhost:3000/docs[39m
    [35mcontext[39m: "Bootstrap"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.859 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769044183768@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.874 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: test-1769044183768@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["test-1769044183768@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.914 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 30461724-8336-4883-9d13-19a4267f48c4[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.915 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 30461724-8336-4883-9d13-19a4267f48c4[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["30461724-8336-4883-9d13-19a4267f48c4","test-1769044183768@example.com","CREATE","User","30461724-8336-4883-9d13-19a4267f48c4",null,"{\"email\":\"test-1769044183768@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"30461724-8336-4883-9d13-19a4267f48c4\",\"createdAt\":\"2026-01-22T04:09:44.273Z\",\"updatedAt\":\"2026-01-22T04:09:44.273Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.932 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: f203b72d-1c8e-43c2-96b7-f58a4d5c3b19[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.955 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769044183950@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.961 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: test-1769044183950@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["test-1769044183950@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.972 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 40209079-f1ef-451d-a982-cca1b36bf5c1[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.972 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 40209079-f1ef-451d-a982-cca1b36bf5c1[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["40209079-f1ef-451d-a982-cca1b36bf5c1","test-1769044183950@example.com","CREATE","User","40209079-f1ef-451d-a982-cca1b36bf5c1",null,"{\"email\":\"test-1769044183950@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"40209079-f1ef-451d-a982-cca1b36bf5c1\",\"createdAt\":\"2026-01-22T04:09:44.353Z\",\"updatedAt\":\"2026-01-22T04:09:44.353Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.982 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 7a9ee1d2-1ef8-4b65-b4d6-91caf9afe9aa[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.989 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769044183950@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:43.995 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar usuâ”œÃ­rio: Email jâ”œÃ­ cadastrado[39m
    [35mcontext[39m: "CreateUserUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.068 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÂ­Æ’Ã„Â» Business Exception: CONFLICT - Email jâ”œÃ­ cadastrado[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST",
      "statusCode": 409
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.102 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["login-test-1769044184100@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.106 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["login-test-1769044184100@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.117 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: cd0abb4c-a166-4527-a004-2715b021955f[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.118 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio cd0abb4c-a166-4527-a004-2715b021955f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["cd0abb4c-a166-4527-a004-2715b021955f","login-test-1769044184100@example.com","CREATE","User","cd0abb4c-a166-4527-a004-2715b021955f",null,"{\"email\":\"login-test-1769044184100@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"cd0abb4c-a166-4527-a004-2715b021955f\",\"createdAt\":\"2026-01-22T04:09:44.490Z\",\"updatedAt\":\"2026-01-22T04:09:44.490Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.129 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 5398b70b-aafc-438b-b331-f2f2a1f75784[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["login-test-1769044184100@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.140 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["cd0abb4c-a166-4527-a004-2715b021955f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.141 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.142 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.153 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["cd0abb4c-a166-4527-a004-2715b021955f","login-test-1769044184100@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","6dc7c568ad7794b1ca150f63fb6e4ec539516a0fc75bee8bb9c014498acab6c2","2026-01-29T01:09:44.155Z",null,null,"2026-01-22T04:09:44.490Z","2026-01-22T01:09:44.155Z",null,1,"cd0abb4c-a166-4527-a004-2715b021955f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.155 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["cd0abb4c-a166-4527-a004-2715b021955f"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["cd0abb4c-a166-4527-a004-2715b021955f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.181 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.182 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Tue Jan 27 2026 01:22:20 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.183 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:09:44 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.183 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.183 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio cd0abb4c-a166-4527-a004-2715b021955f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["cd0abb4c-a166-4527-a004-2715b021955f","login-test-1769044184100@example.com","LOGIN","User","cd0abb4c-a166-4527-a004-2715b021955f",null,"{\"email\":\"login-test-1769044184100@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.194 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: c1befdf1-21a4-464b-8f1d-826123c4b676[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.194 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: login-test-1769044184100@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.201 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["wrong-pwd-1769044184198@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.204 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: wrong-pwd-1769044184198@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["wrong-pwd-1769044184198@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.219 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 2805513a-01a5-4682-8663-2d30433d61f8[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.219 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 2805513a-01a5-4682-8663-2d30433d61f8[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["2805513a-01a5-4682-8663-2d30433d61f8","wrong-pwd-1769044184198@example.com","CREATE","User","2805513a-01a5-4682-8663-2d30433d61f8",null,"{\"email\":\"wrong-pwd-1769044184198@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"2805513a-01a5-4682-8663-2d30433d61f8\",\"createdAt\":\"2026-01-22T04:09:44.583Z\",\"updatedAt\":\"2026-01-22T04:09:44.583Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.231 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: ca604ff2-1339-4576-8a12-640d0abebd5b[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["wrong-pwd-1769044184198@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.239 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”Ã˜Ã® Login attempt com senha incorreta: wrong-pwd-1769044184198@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.240 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Email ou senha invâ”œÃ­lidos[39m
    [35mcontext[39m: {
      "path": "/api/auth/login",
      "method": "POST"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.252 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["refresh-test-1769044184249@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.255 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["refresh-test-1769044184249@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.266 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: dace10dc-3ed3-481f-befa-f5a2b0030d6d[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.266 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio dace10dc-3ed3-481f-befa-f5a2b0030d6d[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["dace10dc-3ed3-481f-befa-f5a2b0030d6d","refresh-test-1769044184249@example.com","CREATE","User","dace10dc-3ed3-481f-befa-f5a2b0030d6d",null,"{\"email\":\"refresh-test-1769044184249@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"dace10dc-3ed3-481f-befa-f5a2b0030d6d\",\"createdAt\":\"2026-01-22T04:09:44.633Z\",\"updatedAt\":\"2026-01-22T04:09:44.633Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.276 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 076c70d1-09d9-486b-a308-326e0e9ee00b[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["refresh-test-1769044184249@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.287 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dace10dc-3ed3-481f-befa-f5a2b0030d6d"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.288 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.289 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.294 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["dace10dc-3ed3-481f-befa-f5a2b0030d6d","refresh-test-1769044184249@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","3194bf8005f9008bc50da90ba1361b127d1d08309a9ae0cf9d56933b9e9fab98","2026-01-29T01:09:44.296Z",null,null,"2026-01-22T04:09:44.633Z","2026-01-22T01:09:44.296Z",null,1,"dace10dc-3ed3-481f-befa-f5a2b0030d6d"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.296 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dace10dc-3ed3-481f-befa-f5a2b0030d6d"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["dace10dc-3ed3-481f-befa-f5a2b0030d6d"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.313 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.313 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Tue Jan 27 2026 01:22:20 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.313 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:09:44 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.314 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.314 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio dace10dc-3ed3-481f-befa-f5a2b0030d6d[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["dace10dc-3ed3-481f-befa-f5a2b0030d6d","refresh-test-1769044184249@example.com","LOGIN","User","dace10dc-3ed3-481f-befa-f5a2b0030d6d",null,"{\"email\":\"refresh-test-1769044184249@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.323 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 1c511407-9266-40a1-b9ae-ebea918a33a0[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.324 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: refresh-test-1769044184249@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.331 -0300 Â­Æ’Ã¶Âº DEBUG: [36mPOST /auth/refresh chamado[39m
    [35mcontext[39m: "AuthController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.331 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro em refresh: Refresh token nâ”œÃºo encontrado no cookie[39m
    [35mcontext[39m: "AuthController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.331 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 400 - Refresh token nâ”œÃºo encontrado no cookie[39m
    [35mcontext[39m: {
      "path": "/api/auth/refresh",
      "method": "POST"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.340 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["customer-test-1769044184338@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.344 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["customer-test-1769044184338@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.353 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 5c230f8f-b10c-4596-8758-03a705ae17d3[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.354 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 5c230f8f-b10c-4596-8758-03a705ae17d3[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["5c230f8f-b10c-4596-8758-03a705ae17d3","customer-test-1769044184338@example.com","CREATE","User","5c230f8f-b10c-4596-8758-03a705ae17d3",null,"{\"email\":\"customer-test-1769044184338@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"5c230f8f-b10c-4596-8758-03a705ae17d3\",\"createdAt\":\"2026-01-22T04:09:44.718Z\",\"updatedAt\":\"2026-01-22T04:09:44.718Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.367 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 6b23deb3-77f7-43f2-835c-2153d866624e[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["customer-test-1769044184338@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.374 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["5c230f8f-b10c-4596-8758-03a705ae17d3"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.375 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.375 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.380 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["5c230f8f-b10c-4596-8758-03a705ae17d3","customer-test-1769044184338@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","6ceeb62291971080666d7232eeb6ca46d90822ec2fa6a03ba8d33cf371e99382","2026-01-29T01:09:44.382Z",null,null,"2026-01-22T04:09:44.718Z","2026-01-22T01:09:44.382Z",null,1,"5c230f8f-b10c-4596-8758-03a705ae17d3"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.382 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["5c230f8f-b10c-4596-8758-03a705ae17d3"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["5c230f8f-b10c-4596-8758-03a705ae17d3"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.395 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.396 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Tue Jan 27 2026 01:22:20 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.396 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:09:44 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.396 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.396 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 5c230f8f-b10c-4596-8758-03a705ae17d3[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["5c230f8f-b10c-4596-8758-03a705ae17d3","customer-test-1769044184338@example.com","LOGIN","User","5c230f8f-b10c-4596-8758-03a705ae17d3",null,"{\"email\":\"customer-test-1769044184338@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.404 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 2cf67355-cbb5-4906-b6cd-bf83da74c47b[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.404 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.412 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.412 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.413 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Joâ”œÃºo Silva",5000.5,null,"ACTIVE",null][0m
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Joâ”œÃºo Silva",5000.5,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.476 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.476 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.485 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"customer_id"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"customer_userId"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"customer_name"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"customer_salary"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"customer_company"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"customer_status"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"customer_createdAt"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"customer_updatedAt"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mORDER BY[0m [37m"customer"[0m[37m.[0m[37m"name"[0m [94mASC[0m [94mLIMIT[0m [32m10[0m [37mOFFSET[0m [32m0[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.485 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.486 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã¯ Listando clientes: skip=0, take=10, search=undefined, searchField=status[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.502 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["undefined"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.503 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.503 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¬ Buscando cliente: undefined[39m
    [35mcontext[39m: "CustomerController"
[4m[31mquery failed:[39m[24m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["undefined"][0m
[4m[31merror:[39m[24m error: invalid input syntax for type uuid: "undefined"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.508 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao buscar cliente: QueryFailedError: invalid input syntax for type uuid: "undefined"[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.534 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: invalid input syntax for type uuid: "undefined"[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers/undefined",
      "method": "GET"
    }
    [35mtrace[39m: "QueryFailedError: invalid input syntax for type uuid: \"undefined\"\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SelectQueryBuilder.loadRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3868:25)\n    at SelectQueryBuilder.executeEntitiesAndRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3614:26)\n    at SelectQueryBuilder.getRawAndEntities (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1671:29)\n    at SelectQueryBuilder.getOne (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1698:25)\n    at FindCustomerByIdUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\find-customer-by-id.ucase.ts:9:1)\n    at CustomerController.findOne (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:51:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.543 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["non-existent-id"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.543 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769044184338@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.544 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¬ Buscando cliente: non-existent-id[39m
    [35mcontext[39m: "CustomerController"
[4m[31mquery failed:[39m[24m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["non-existent-id"][0m
[4m[31merror:[39m[24m error: invalid input syntax for type uuid: "non-existent-id"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.547 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao buscar cliente: QueryFailedError: invalid input syntax for type uuid: "non-existent-id"[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.548 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: invalid input syntax for type uuid: "non-existent-id"[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers/non-existent-id",
      "method": "GET"
    }
    [35mtrace[39m: "QueryFailedError: invalid input syntax for type uuid: \"non-existent-id\"\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SelectQueryBuilder.loadRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3868:25)\n    at SelectQueryBuilder.executeEntitiesAndRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3614:26)\n    at SelectQueryBuilder.getRawAndEntities (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1671:29)\n    at SelectQueryBuilder.getOne (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1698:25)\n    at FindCustomerByIdUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\find-customer-by-id.ucase.ts:9:1)\n    at CustomerController.findOne (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:51:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.553 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dashboard-test-1769044184552@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.556 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["dashboard-test-1769044184552@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.566 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 55959179-8085-47ce-b66a-17fa1c9b04ae[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.567 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 55959179-8085-47ce-b66a-17fa1c9b04ae[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["55959179-8085-47ce-b66a-17fa1c9b04ae","dashboard-test-1769044184552@example.com","CREATE","User","55959179-8085-47ce-b66a-17fa1c9b04ae",null,"{\"email\":\"dashboard-test-1769044184552@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"55959179-8085-47ce-b66a-17fa1c9b04ae\",\"createdAt\":\"2026-01-22T04:09:44.920Z\",\"updatedAt\":\"2026-01-22T04:09:44.920Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.577 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 6f692ade-3061-43a7-8537-0ce096d6bc41[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dashboard-test-1769044184552@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.589 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["55959179-8085-47ce-b66a-17fa1c9b04ae"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.590 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.590 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.595 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["55959179-8085-47ce-b66a-17fa1c9b04ae","dashboard-test-1769044184552@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","5894162f7b4135d74c4a184b8910bc6a1002f0d961197190335b783c5fd8ea07","2026-01-29T01:09:44.597Z",null,null,"2026-01-22T04:09:44.920Z","2026-01-22T01:09:44.597Z",null,1,"55959179-8085-47ce-b66a-17fa1c9b04ae"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.597 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["55959179-8085-47ce-b66a-17fa1c9b04ae"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["55959179-8085-47ce-b66a-17fa1c9b04ae"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.613 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.614 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Tue Jan 27 2026 01:22:20 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.614 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:09:44 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.614 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.614 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 55959179-8085-47ce-b66a-17fa1c9b04ae[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["55959179-8085-47ce-b66a-17fa1c9b04ae","dashboard-test-1769044184552@example.com","LOGIN","User","55959179-8085-47ce-b66a-17fa1c9b04ae",null,"{\"email\":\"dashboard-test-1769044184552@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.625 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: f5e9b78e-026d-4963-82f2-f1f5175906ec[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.625 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.631 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.632 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.633 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.634 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.635 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/stats - usuâ”œÃ­rio: 55959179-8085-47ce-b66a-17fa1c9b04ae[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.635 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Iniciando obtenâ”œÂºâ”œÃºo de estatâ”œÂ¡sticas para usuâ”œÃ­rio: 55959179-8085-47ce-b66a-17fa1c9b04ae[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"audit_logs"[0m [37m"AuditLog"[0m [94mWHERE[0m [37m"AuditLog"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.658 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Estatâ”œÂ¡sticas obtidas com sucesso - Usuâ”œÃ­rios: 9, Clientes: 29, Auditorias: 22[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.663 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mDATE_TRUNC[0m[37m([0m[37m'day'[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m[37m)[0m [94mas[0m [37mday[0m[37m,[0m [95mCOUNT[0m[37m([0m[37m"customer"[0m[37m.[0m[37m"id"[0m[37m)[0m[37m:[0m[37m:[0m[37mint[0m [94mas[0m [37mtotal[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mGROUP BY[0m [95mDATE_TRUNC[0m[37m([0m[37m'day'[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m[37m)[0m [94mORDER BY[0m [37mday[0m [94mASC[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.664 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.665 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.665 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: dashboard-test-1769044184552@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.665 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/customer-trend/day (days: 30) - usuâ”œÃ­rio: 55959179-8085-47ce-b66a-17fa1c9b04ae[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.666 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetCustomerTrendByDayUseCase] Fetching customer trend for 30 days - usuâ”œÃ­rio: 55959179-8085-47ce-b66a-17fa1c9b04ae[39m
    [35mcontext[39m: "GetCustomerTrendByDayUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.675 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetCustomerTrendByDayUseCase] Successfully fetched 1 days of data[39m
    [35mcontext[39m: "GetCustomerTrendByDayUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.681 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Nâ”œÃºo autorizado[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "GET"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.685 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”Ã˜Ã® JWT invâ”œÃ­lido: jwt malformed[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.685 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Token invâ”œÃ­lido[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "GET"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.691 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.692 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 400 - email must be an email[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.697 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.698 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 400 - password must be longer than or equal to 8 characters[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST"
    }
 FAIL   backend-e2e  apps/backend-e2e/src/backend/complete-flow.spec.ts
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ User Registration & Authentication Ã”Ã‡â•‘ should fail login with wrong password
    expect(received).toBe(expected) // Object.is equality
    Expected: 404
    Received: 401

      68 |         fail('Should have thrown 404 Not Found');
      69 |       } catch (error: any) {
    > 70 |         expect(error.response?.status).toBe(404);
         |                                        ^
      71 |       }
      72 |     });
      73 |

      at Object.<anonymous> (src/backend/complete-flow.spec.ts:70:40)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ User Registration & Authentication Ã”Ã‡â•‘ should refresh token successfully
    AxiosError: Request failed with status code 400

      85 |
      86 |       const oldRefreshToken = loginResponse.data.refreshToken;
    > 87 |       const refreshResponse = await axios.post('/api/auth/refresh', {
         |                               ^
      88 |         refreshToken: oldRefreshToken,
      89 |       });
      90 |

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
      at async Object.<anonymous> (src/backend/complete-flow.spec.ts:87:31)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should create a customer
    AxiosError: Request failed with status code 500

      122 |       };
      123 |
    > 124 |       const response = await axios.post('/api/v1/customers', customerData, {
          |                        ^
      125 |         headers: { Authorization: `Bearer ${authToken}` },
      126 |       });
      127 |

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
      at async Object.<anonymous> (src/backend/complete-flow.spec.ts:124:24)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should get all customers
    expect(received).toBe(expected) // Object.is equality
    Expected: true
    Received: false

      139 |
      140 |       expect(response.status).toBe(200);
    > 141 |       expect(Array.isArray(response.data)).toBe(true);
          |                                            ^
      142 |     });
      143 |
      144 |     it('should get customer by id', async () => {

      at Object.<anonymous> (src/backend/complete-flow.spec.ts:141:44)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should get customer by id
    AxiosError: Request failed with status code 500

      143 |
      144 |     it('should get customer by id', async () => {
    > 145 |       const response = await axios.get(`/api/v1/customers/${customerId}`, {
          |                        ^
      146 |         headers: { Authorization: `Bearer ${authToken}` },
      147 |       });
      148 |

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
      at async Object.<anonymous> (src/backend/complete-flow.spec.ts:145:24)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should fail to get non-existent customer
    expect(received).toBe(expected) // Object.is equality
    Expected: 404
    Received: 500

      158 |         fail('Should have thrown 404');
      159 |       } catch (error: any) {
    > 160 |         expect(error.response?.status).toBe(404);
          |                                        ^
      161 |       }
      162 |     });
      163 |   });

      at Object.<anonymous> (src/backend/complete-flow.spec.ts:160:40)
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:44.886 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 404 - Cannot GET /api/[39m
    [35mcontext[39m: {
      "path": "/api/",
      "method": "GET"
    }
 FAIL   backend-e2e  apps/backend-e2e/src/backend/backend.spec.ts
  Ã”Ã¹Ã… GET / Ã”Ã‡â•‘ should return a message
    AxiosError: Request failed with status code 404

      3 | describe('GET /', () => {
      4 |   it('should return a message', async () => {
    > 5 |     const res = await axios.get(`/api/`);
        |                 ^
      6 |
      7 |     expect(res.status).toBe(200);
      8 |     expect(res.data).toEqual({ message: 'Hello API' });

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
      at async Object.<anonymous> (src/backend/backend.spec.ts:5:17)
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.027 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-test-1769044185021@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.035 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["audit-test-1769044185021@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.046 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: c62c4b5a-26d5-4293-8738-1a16cff019fa[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.047 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio c62c4b5a-26d5-4293-8738-1a16cff019fa[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["c62c4b5a-26d5-4293-8738-1a16cff019fa","audit-test-1769044185021@example.com","CREATE","User","c62c4b5a-26d5-4293-8738-1a16cff019fa",null,"{\"email\":\"audit-test-1769044185021@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"c62c4b5a-26d5-4293-8738-1a16cff019fa\",\"createdAt\":\"2026-01-22T04:09:45.377Z\",\"updatedAt\":\"2026-01-22T04:09:45.377Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.057 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 9b2c9f7c-d60e-4b92-a03e-99355bcaf166[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-test-1769044185021@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.064 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["c62c4b5a-26d5-4293-8738-1a16cff019fa"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.064 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.065 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.069 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["c62c4b5a-26d5-4293-8738-1a16cff019fa","audit-test-1769044185021@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","66ddd3307805cf0c8085126f5a67adef0b587d02c6ff154137c6c07fdef52a98","2026-01-29T01:09:45.070Z",null,null,"2026-01-22T04:09:45.377Z","2026-01-22T01:09:45.070Z",null,1,"c62c4b5a-26d5-4293-8738-1a16cff019fa"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.070 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["c62c4b5a-26d5-4293-8738-1a16cff019fa"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["c62c4b5a-26d5-4293-8738-1a16cff019fa"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.087 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.087 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Tue Jan 27 2026 04:09:00 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.088 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:09:45 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.088 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.089 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio c62c4b5a-26d5-4293-8738-1a16cff019fa[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["c62c4b5a-26d5-4293-8738-1a16cff019fa","audit-test-1769044185021@example.com","LOGIN","User","c62c4b5a-26d5-4293-8738-1a16cff019fa",null,"{\"email\":\"audit-test-1769044185021@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.099 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 7991d583-c2f9-4ed1-9b01-a5cf22dc347f[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.100 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.104 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-create-user-1769044185103@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.109 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: audit-create-user-1769044185103@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["audit-create-user-1769044185103@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.118 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: d1662b9d-cc92-49eb-8137-804fcedaae46[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.118 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio d1662b9d-cc92-49eb-8137-804fcedaae46[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["d1662b9d-cc92-49eb-8137-804fcedaae46","audit-create-user-1769044185103@example.com","CREATE","User","d1662b9d-cc92-49eb-8137-804fcedaae46",null,"{\"email\":\"audit-create-user-1769044185103@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"d1662b9d-cc92-49eb-8137-804fcedaae46\",\"createdAt\":\"2026-01-22T04:09:45.448Z\",\"updatedAt\":\"2026-01-22T04:09:45.448Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.129 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 4f709c50-05b2-4876-8bfc-58302be75eb5[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.137 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.138 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.138 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Audit Test Customer",7500,null,"ACTIVE",null][0m
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Audit Test Customer",7500,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.146 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.146 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.170 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.171 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.171 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Customer 1",5000,null,"ACTIVE",null][0m
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Customer 1",5000,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.179 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.179 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
[90m[4mquery:[24m[39m [94mSELECT[0m [32m1[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.195 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.196 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.196 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 0",5000,null,"ACTIVE",null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.203 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.203 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.204 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.208 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.209 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.209 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.213 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.213 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.214 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.217 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.218 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769044185021@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.218 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: undefined[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 1",5100,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 2",5200,null,"ACTIVE",null][0m
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 0",5000,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 1",5100,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 2",5200,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.231 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.231 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.233 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.233 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.236 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.236 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 3",5300,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 4",5400,null,"ACTIVE",null][0m
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 3",5300,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.252 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
[4m[31mquery failed:[39m[24m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m5[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["Concurrent Customer 4",5400,null,"ACTIVE",null][0m
[4m[31merror:[39m[24m error: null value in column "userId" of relation "customers" violates not-null constraint
[90m[4mquery:[24m[39m [37mROLLBACK[0m
 FAIL   backend-e2e  apps/backend-e2e/src/backend/audit-and-health.spec.ts
  Ã”Ã¹Ã… E2E: Audit Logging Ã”Ã‡â•‘ Audit Trail Ã”Ã‡â•‘ should create audit log when customer is created
    AxiosError: Request failed with status code 500

      42 |       };
      43 |
    > 44 |       const response = await axios.post('/api/v1/customers', customerData, {
         |                        ^
      45 |         headers: { Authorization: `Bearer ${authToken}` },
      46 |       });
      47 |

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
      at async Object.<anonymous> (src/backend/audit-and-health.spec.ts:44:24)
  Ã”Ã¹Ã… E2E: Audit Logging Ã”Ã‡â•‘ Audit Trail Ã”Ã‡â•‘ should track all user actions in audit logs
    AxiosError: Request failed with status code 500

      54 |     it('should track all user actions in audit logs', async () => {
      55 |       // Create multiple customers to generate audit logs
    > 56 |       const customer1 = await axios.post(
         |                         ^
      57 |         '/api/v1/customers',
      58 |         { name: 'Customer 1', salary: 5000 },
      59 |         { headers: { Authorization: `Bearer ${authToken}` } },

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
      at async Object.<anonymous> (src/backend/audit-and-health.spec.ts:56:25)
  Ã”Ã¹Ã… E2E: Audit Logging Ã”Ã‡â•‘ System Health Ã”Ã‡â•‘ should handle concurrent requests
    AxiosError: Request failed with status code 500

      103 |       }
      104 |
    > 105 |       const results = await Promise.all(promises);
          |                       ^
      106 |
      107 |       results.forEach((result) => {
      108 |         expect(result.status).toBe(201);

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
          at async Promise.all (index 0)
      at async Object.<anonymous> (src/backend/audit-and-health.spec.ts:105:23)
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.252 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.255 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar cliente: QueryFailedError: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:09:45.256 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: null value in column "userId" of relation "customers" violates not-null constraint[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "POST"
    }
    [35mtrace[39m: "QueryFailedError: null value in column \"userId\" of relation \"customers\" violates not-null constraint\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at InsertQueryBuilder.execute (C:\Projects\Desafio\teddy-challenger\src\query-builder\InsertQueryBuilder.ts:164:33)\n    at SubjectExecutor.executeInsertOperations (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:435:42)\n    at SubjectExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\SubjectExecutor.ts:137:9)\n    at EntityPersistExecutor.execute (C:\Projects\Desafio\teddy-challenger\src\persistence\EntityPersistExecutor.ts:182:21)\n    at CreateCustomerUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\create-customer.ucase.ts:22:1)\n    at CustomerController.create (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:26:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Test Suites: 3 failed, 3 total
Tests:       10 failed, 11 passed, 21 total
Snapshots:   0 total
Time:        2.005 s
Ran all test suites.
Attempting to close port 3000
[7m[1m[36m NX [39m[22m[27m [1mProcess exited with code 1, waiting for changes to restart...[22m
Port 3000 successfully closed
Tearing down...



 NX   Running target e2e for project backend-e2e and 2 tasks it depends on failed

Failed tasks:

- backend-e2e:e2e

Hint: run the command with --verbose for more details.

