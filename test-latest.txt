
> @teddy-challenger/source@0.0.0 backend:e2e
> npx nx e2e backend-e2e


 NX   Running target e2e for project backend-e2e and 2 tasks it depends on:



> nx run backend:build

> webpack-cli build --node-env=production

[1m[33mWARNING[39m[22m in [1m./node_modules/@opentelemetry/sdk-node/build/src/TracerProviderWithEnvExporter.js[39m[22m [1m[32m89:39-80[39m[22m
[1mModule [1m[31mnot found[39m[22m[1m: [1m[31mError[39m[22m[1m: Can't resolve '@opentelemetry/exporter-jaeger' in 'C:\Projects\Desafio\teddy-challenger\apps\backend\node_modules\@opentelemetry\sdk-node\build\src'[39m[22m

webpack compiled with [1m[33m1 warning[39m[22m (e6bf5fdf4749d67b)

> nx run backend:serve:development


> nx run backend-e2e:e2e

NX Daemon is not running. Node process will not restart automatically after file changes.
Setting up...
[2m> [22m[2mnx run[22m backend:build:development
[2m> [22mwebpack-cli build --node-env=development
[1m[33mWARNING[39m[22m in [1m./node_modules/@opentelemetry/sdk-node/build/src/TracerProviderWithEnvExporter.js[39m[22m [1m[32m89:39-80[39m[22m
[1mModule [1m[31mnot found[39m[22m[1m: [1m[31mError[39m[22m[1m: Can't resolve '@opentelemetry/exporter-jaeger' in 'C:\Projects\Desafio\teddy-challenger\apps\backend\node_modules\@opentelemetry\sdk-node\build\src'[39m[22m
webpack compiled with [1m[33m1 warning[39m[22m (e6bf5fdf4749d67b)
[0m[7m[1m[32m NX [39m[22m[27m[0m  [32mSuccessfully ran target [1mbuild[22m for project backend[39m
Debugger listening on ws://localhost:9229/6b70f9dd-f5f5-4de2-a661-e26880a7b340
Debugger listening on ws://localhost:9229/6b70f9dd-f5f5-4de2-a661-e26880a7b340
For help, see: https://nodejs.org/en/docs/inspector

[dotenv@17.2.3] injecting env (0) from .env -- tip: Â­Æ’Ã¶Ã‰ prevent committing .env to code: https://dotenvx.com/precommit
[95m[Nest] 40624  - [39m21/01/2026, 22:24:09 [95m  DEBUG[39m [38;5;3m[TypeOrmConfig] [39m[95mDatabase Config: {"host":"localhost","port":5432,"database":"teddy_db","synchronize":true}[39m
Â­Æ’Ã¶Ã¬ [TELEMETRY] Inicializando OpenTelemetry com endpoint: http://localhost:4318/v1/traces
Ã”Â£Ã  [TELEMETRY] OpenTelemetry iniciado com sucesso
Â­Æ’Ã¶Ã¬ [MAIN] Iniciando NestFactory.create...
[90m[4mquery:[24m[39m [94mSELECT[0m [95mversion[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_schema[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mCREATE[0m [37mEXTENSION[0m [94mIF[0m [94mNOT[0m [94mEXISTS[0m [37m"uuid-ossp"[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_schema[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_database[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"table_schema"[0m[37m,[0m [37m"table_name"[0m[37m,[0m [95mobj_description[0m[37m([0m[37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37m"table_schema"[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37m"table_name"[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37mregclass[0m[37m,[0m [37m'pg_class'[0m[37m)[0m [94mAS[0m [37mtable_comment[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"tables"[0m [94mWHERE[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [94mTRUE[0m [94mFROM[0m [37minformation_schema[0m[37m.[0m[37mcolumns[0m [94mWHERE[0m [37mtable_name[0m [37m=[0m [37m'pg_class'[0m [94mand[0m [37mcolumn_name[0m [37m=[0m [37m'relispartition'[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37mcolumns[0m[37m.[0m[37m*[0m[37m,[0m [37mpg_catalog[0m[37m.[0m[95mcol_description[0m[37m([0m[37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37mtable_catalog[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37mtable_schema[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37mtable_name[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37mregclass[0m[37m:[0m[37m:[0m[37moid[0m[37m,[0m [37mordinal_position[0m[37m)[0m [94mAS[0m [37mdescription[0m[37m,[0m [37m([0m[37m'"'[0m [37m|[0m[37m|[0m [37m"udt_schema"[0m [37m|[0m[37m|[0m [37m'"."'[0m [37m|[0m[37m|[0m [37m"udt_name"[0m [37m|[0m[37m|[0m [37m'"'[0m[37m)[0m[37m:[0m[37m:[0m[37m"regtype"[0m[37m:[0m[37m:[0m[94mtext[0m [94mAS[0m [37m"regtype"[0m[37m,[0m [37mpg_catalog[0m[37m.[0m[95mformat_type[0m[37m([0m[37m"col_attr"[0m[37m.[0m[37m"atttypid"[0m[37m,[0m [37m"col_attr"[0m[37m.[0m[37m"atttypmod"[0m[37m)[0m [94mAS[0m [37m"format_type"[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"columns"[0m [94mLEFT JOIN[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_attribute"[0m [94mAS[0m [37m"col_attr"[0m [94mON[0m [37m"col_attr"[0m[37m.[0m[37m"attname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"column_name"[0m [94mAND[0m [37m"col_attr"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m([0m [94mSELECT[0m [37m"cls"[0m[37m.[0m[37m"oid"[0m [94mFROM[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_class"[0m [94mAS[0m [37m"cls"[0m [94mLEFT JOIN[0m [37m"pg_catalog"[0m[37m.[0m[37m"pg_namespace"[0m [94mAS[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cls"[0m[37m.[0m[37m"relnamespace"[0m [94mWHERE[0m [37m"cls"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"table_name"[0m [94mAND[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m"columns"[0m[37m.[0m[37m"table_schema"[0m [37m)[0m [94mWHERE[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"cnst"[0m[37m.[0m[37m"conname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [95mpg_get_constraintdef[0m[37m([0m[37m"cnst"[0m[37m.[0m[37m"oid"[0m[37m)[0m [94mAS[0m [37m"expression"[0m[37m,[0m [94mCASE[0m [37m"cnst"[0m[37m.[0m[37m"contype"[0m [94mWHEN[0m [37m'p'[0m [94mTHEN[0m [37m'PRIMARY'[0m [94mWHEN[0m [37m'u'[0m [94mTHEN[0m [37m'UNIQUE'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CHECK'[0m [94mWHEN[0m [37m'x'[0m [94mTHEN[0m [37m'EXCLUDE'[0m [94mEND[0m [94mAS[0m [37m"constraint_type"[0m[37m,[0m [37m"a"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m [94mFROM[0m [37m"pg_constraint"[0m [37m"cnst"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"t"[0m [94mON[0m [37m"t"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"conrelid"[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"connamespace"[0m [94mLEFT JOIN[0m [37m"pg_attribute"[0m [37m"a"[0m [94mON[0m [37m"a"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"cnst"[0m[37m.[0m[37m"conrelid"[0m [94mAND[0m [37m"a"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [94mANY[0m [37m([0m[37m"cnst"[0m[37m.[0m[37m"conkey"[0m[37m)[0m [94mWHERE[0m [37m"t"[0m[37m.[0m[37m"relkind"[0m [94mIN[0m [37m([0m[37m'r'[0m[37m,[0m [37m'p'[0m[37m)[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"i"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [37m"a"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m[37m,[0m [94mCASE[0m [37m"ix"[0m[37m.[0m[37m"indisunique"[0m [94mWHEN[0m [37m't'[0m [94mTHEN[0m [37m'TRUE'[0m [94mELSE[0m[37m'FALSE'[0m [94mEND[0m [94mAS[0m [37m"is_unique"[0m[37m,[0m [95mpg_get_expr[0m[37m([0m[37m"ix"[0m[37m.[0m[37m"indpred"[0m[37m,[0m [37m"ix"[0m[37m.[0m[37m"indrelid"[0m[37m)[0m [94mAS[0m [37m"condition"[0m[37m,[0m [37m"types"[0m[37m.[0m[37m"typname"[0m [94mAS[0m [37m"type_name"[0m[37m,[0m [37m"am"[0m[37m.[0m[37m"amname"[0m [94mAS[0m [37m"index_type"[0m [94mFROM[0m [37m"pg_class"[0m [37m"t"[0m [94mINNER JOIN[0m [37m"pg_index"[0m [37m"ix"[0m [94mON[0m [37m"ix"[0m[37m.[0m[37m"indrelid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"a"[0m [94mON[0m [37m"a"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"oid"[0m  [94mAND[0m [37m"a"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [94mANY[0m [37m([0m[37m"ix"[0m[37m.[0m[37m"indkey"[0m[37m)[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"t"[0m[37m.[0m[37m"relnamespace"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"i"[0m [94mON[0m [37m"i"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"ix"[0m[37m.[0m[37m"indexrelid"[0m [94mINNER JOIN[0m [37m"pg_type"[0m [37m"types"[0m [94mON[0m [37m"types"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"a"[0m[37m.[0m[37m"atttypid"[0m [94mINNER JOIN[0m [37m"pg_am"[0m [37m"am"[0m [94mON[0m [37m"i"[0m[37m.[0m[37m"relam"[0m [37m=[0m [37m"am"[0m[37m.[0m[37m"oid"[0m [94mLEFT JOIN[0m [37m"pg_constraint"[0m [37m"cnst"[0m [94mON[0m [37m"cnst"[0m[37m.[0m[37m"conname"[0m [37m=[0m [37m"i"[0m[37m.[0m[37m"relname"[0m [94mWHERE[0m [37m"t"[0m[37m.[0m[37m"relkind"[0m [94mIN[0m [37m([0m[37m'r'[0m[37m,[0m [37m'p'[0m[37m)[0m [94mAND[0m [37m"cnst"[0m[37m.[0m[37m"contype"[0m [94mIS NULL[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"t"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"con"[0m[37m.[0m[37m"conname"[0m [94mAS[0m [37m"constraint_name"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"table_schema"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"table_name"[0m[37m,[0m [37m"att2"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"column_name"[0m[37m,[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m [94mAS[0m [37m"referenced_table_schema"[0m[37m,[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [94mAS[0m [37m"referenced_table_name"[0m[37m,[0m [37m"att"[0m[37m.[0m[37m"attname"[0m [94mAS[0m [37m"referenced_column_name"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"confdeltype"[0m [94mAS[0m [37m"on_delete"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"confupdtype"[0m [94mAS[0m [37m"on_update"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"condeferrable"[0m [94mAS[0m [37m"deferrable"[0m[37m,[0m [37m"con"[0m[37m.[0m[37m"condeferred"[0m [94mAS[0m [37m"deferred"[0m [94mFROM[0m [37m([0m [94mSELECT[0m [95mUNNEST[0m [37m([0m[37m"con1"[0m[37m.[0m[37m"conkey"[0m[37m)[0m [94mAS[0m [37m"parent"[0m[37m,[0m [95mUNNEST[0m [37m([0m[37m"con1"[0m[37m.[0m[37m"confkey"[0m[37m)[0m [94mAS[0m [37m"child"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"confrelid"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"conrelid"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"conname"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"contype"[0m[37m,[0m [37m"ns"[0m[37m.[0m[37m"nspname"[0m[37m,[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m[37m,[0m [37m"con1"[0m[37m.[0m[37m"condeferrable"[0m[37m,[0m [94mCASE[0m [94mWHEN[0m [37m"con1"[0m[37m.[0m[37m"condeferred"[0m [94mTHEN[0m [37m'INITIALLY DEFERRED'[0m [94mELSE[0m [37m'INITIALLY IMMEDIATE'[0m [94mEND[0m [94mas[0m [37mcondeferred[0m[37m,[0m [94mCASE[0m [37m"con1"[0m[37m.[0m[37m"confdeltype"[0m [94mWHEN[0m [37m'a'[0m [94mTHEN[0m [37m'NO ACTION'[0m [94mWHEN[0m [37m'r'[0m [94mTHEN[0m [37m'RESTRICT'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CASCADE'[0m [94mWHEN[0m [37m'n'[0m [94mTHEN[0m [37m'SET NULL'[0m [94mWHEN[0m [37m'd'[0m [94mTHEN[0m [37m'SET DEFAULT'[0m [94mEND[0m [94mas[0m [37m"confdeltype"[0m[37m,[0m [94mCASE[0m [37m"con1"[0m[37m.[0m[37m"confupdtype"[0m [94mWHEN[0m [37m'a'[0m [94mTHEN[0m [37m'NO ACTION'[0m [94mWHEN[0m [37m'r'[0m [94mTHEN[0m [37m'RESTRICT'[0m [94mWHEN[0m [37m'c'[0m [94mTHEN[0m [37m'CASCADE'[0m [94mWHEN[0m [37m'n'[0m [94mTHEN[0m [37m'SET NULL'[0m [94mWHEN[0m [37m'd'[0m [94mTHEN[0m [37m'SET DEFAULT'[0m [94mEND[0m [94mas[0m [37m"confupdtype"[0m [94mFROM[0m [37m"pg_class"[0m [37m"cl"[0m [94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"relnamespace"[0m [37m=[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_constraint"[0m [37m"con1"[0m [94mON[0m [37m"con1"[0m[37m.[0m[37m"conrelid"[0m [37m=[0m [37m"cl"[0m[37m.[0m[37m"oid"[0m [94mWHERE[0m [37m"con1"[0m[37m.[0m[37m"contype"[0m [37m=[0m [37m'f'[0m [94mAND[0m [37m([0m[37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'users'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'customers'[0m[37m)[0m [94mOR[0m [37m([0m[37m"ns"[0m[37m.[0m[37m"nspname"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relname"[0m [37m=[0m [37m'audit_logs'[0m[37m)[0m[37m)[0m [37m)[0m [37m"con"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"att"[0m [94mON[0m [37m"att"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"confrelid"[0m [94mAND[0m [37m"att"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"child"[0m [94mINNER JOIN[0m [37m"pg_class"[0m [37m"cl"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"oid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"confrelid"[0m  [94mAND[0m [37m"cl"[0m[37m.[0m[37m"relispartition"[0m [37m=[0m [37m'f'[0m[94mINNER JOIN[0m [37m"pg_namespace"[0m [37m"ns"[0m [94mON[0m [37m"cl"[0m[37m.[0m[37m"relnamespace"[0m [37m=[0m [37m"ns"[0m[37m.[0m[37m"oid"[0m [94mINNER JOIN[0m [37m"pg_attribute"[0m [37m"att2"[0m [94mON[0m [37m"att2"[0m[37m.[0m[37m"attrelid"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"conrelid"[0m [94mAND[0m [37m"att2"[0m[37m.[0m[37m"attnum"[0m [37m=[0m [37m"con"[0m[37m.[0m[37m"parent"[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [37m"information_schema"[0m[37m.[0m[37m"tables"[0m [94mWHERE[0m [37m"table_schema"[0m [37m=[0m [37m'public'[0m [94mAND[0m [37m"table_name"[0m [37m=[0m [37m'typeorm_metadata'[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Ã”Â£Ã  [MAIN] NestFactory.create completo
Â­Æ’Ã¶Ã¬ [MAIN] Iniciando app.listen...
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.227 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mUnsupported route path: "/api/*". In previous versions, the symbols ?, *, and + were used to denote optional or repeating path parameters. The latest version of "path-to-regexp" now requires the use of named parameters. For example, instead of using a route like /users/* to capture all routes starting with "/users", you should use /users/*path. For more details, refer to the migration guide. Attempting to auto-convert...[39m
    [35mcontext[39m: "LegacyRouteConverter"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.231 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mAppController {/api}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.234 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.235 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mUserController {/api/v1/users}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.236 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.237 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.238 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.238 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, PUT} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.239 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id, DELETE} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.240 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/users/:id/password, PATCH} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.240 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mCustomerController {/api/v1/customers}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.240 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.241 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.242 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.242 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, PUT} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.242 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/v1/customers/:id, DELETE} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.242 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mAuthController {/api/auth}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.243 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/login, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.243 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/refresh, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.243 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/logout, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.243 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/me, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.244 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/recovery-password, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.244 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/reset-password, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.244 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/auth/increment-access, POST} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.244 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mHealthController {/api/health}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.245 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.245 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health/live, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.245 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/health/ready, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.245 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMetricsController {/api/metrics}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.245 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/metrics, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.245 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mDashboardController {/api/dashboard}:[39m
    [35mcontext[39m: "RoutesResolver"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.245 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/stats, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.246 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/recent-customers, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.246 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/customer-trend/month, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:13.246 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mMapped {/api/dashboard/customer-trend/day, GET} route[39m
    [35mcontext[39m: "RouterExplorer"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@teddy.com"][0m
Ã”Â£Ã´ Admin user already exists
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@teddy.com"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"userId"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [90m-- PARAMETERS: ["56687d17-70a5-4b71-8791-0ebca642404b"][0m
Ã”Â£Ã´ Customers already exist (29 found)
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:15.280 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mNest application successfully started[39m
    [35mcontext[39m: "NestApplication"
Ã”Â£Ã  [MAIN] app.listen completo
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:15.282 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’ÃœÃ‡ Application is running on: http://localhost:3000/api[39m
    [35mcontext[39m: "Bootstrap"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:15.283 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ãœ Swagger documentation: http://localhost:3000/docs[39m
    [35mcontext[39m: "Bootstrap"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.480 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-test-1769045056402@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.488 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.494 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["audit-test-1769045056402@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
 PASS   backend-e2e  apps/backend-e2e/src/backend/backend.spec.ts
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769045056398@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.512 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.512 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","audit-test-1769045056402@example.com","CREATE","User","60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65",null,"{\"email\":\"audit-test-1769045056402@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"createdAt\":\"2026-01-22T04:24:17.264Z\",\"updatedAt\":\"2026-01-22T04:24:17.264Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.515 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: test-1769045056398@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["test-1769045056398@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.521 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 26c05c84-0311-42e4-b19c-3ae051cc810c[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.525 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: cb931048-71ec-4be4-bbf6-00c18642f3ee[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.525 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio cb931048-71ec-4be4-bbf6-00c18642f3ee[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["cb931048-71ec-4be4-bbf6-00c18642f3ee","test-1769045056398@example.com","CREATE","User","cb931048-71ec-4be4-bbf6-00c18642f3ee",null,"{\"email\":\"test-1769045056398@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"cb931048-71ec-4be4-bbf6-00c18642f3ee\",\"createdAt\":\"2026-01-22T04:24:17.282Z\",\"updatedAt\":\"2026-01-22T04:24:17.282Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-test-1769045056402@example.com"][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.532 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.532 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.534 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.536 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: b27572a0-0128-465e-86b1-a8c3d6b0d2d9[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","audit-test-1769045056402@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","f89aee897ee7411efda90655f5e384484e087a26ac129c0f8a3d30ea9acd474d","2026-01-29T01:24:16.541Z",null,null,"2026-01-22T04:24:17.264Z","2026-01-22T01:24:16.541Z",null,1,"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.540 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.541 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.546 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769045056542@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.549 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: test-1769045056542@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65"][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["test-1769045056542@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65"][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.557 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.557 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Fri Jan 23 2026 19:50:40 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.558 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:24:16 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.558 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.558 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","audit-test-1769045056402@example.com","LOGIN","User","60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65",null,"{\"email\":\"audit-test-1769045056402@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.561 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: cd15f1e3-6fc2-4ce3-9282-32b900f6b554[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.561 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio cd15f1e3-6fc2-4ce3-9282-32b900f6b554[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["cd15f1e3-6fc2-4ce3-9282-32b900f6b554","test-1769045056542@example.com","CREATE","User","cd15f1e3-6fc2-4ce3-9282-32b900f6b554",null,"{\"email\":\"test-1769045056542@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"cd15f1e3-6fc2-4ce3-9282-32b900f6b554\",\"createdAt\":\"2026-01-22T04:24:17.313Z\",\"updatedAt\":\"2026-01-22T04:24:17.313Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.567 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 4c8d52fb-d381-46e5-a6eb-261061fdb733[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.567 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.572 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: ad4d9831-344b-41f8-9664-2efacadf8724[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.575 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["test-1769045056542@example.com"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["audit-create-user-1769045056573@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.578 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.580 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao criar usuâ”œÃ­rio: Email jâ”œÃ­ cadastrado[39m
    [35mcontext[39m: "CreateUserUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.621 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÂ­Æ’Ã„Â» Business Exception: CONFLICT - Email jâ”œÃ­ cadastrado[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST",
      "statusCode": 409
    }
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.622 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: audit-create-user-1769045056573@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["audit-create-user-1769045056573@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.631 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: d259cbcd-2336-42c2-a81a-87c34724f9bb[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.631 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio d259cbcd-2336-42c2-a81a-87c34724f9bb[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["d259cbcd-2336-42c2-a81a-87c34724f9bb","audit-create-user-1769045056573@example.com","CREATE","User","d259cbcd-2336-42c2-a81a-87c34724f9bb",null,"{\"email\":\"audit-create-user-1769045056573@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"d259cbcd-2336-42c2-a81a-87c34724f9bb\",\"createdAt\":\"2026-01-22T04:24:17.384Z\",\"updatedAt\":\"2026-01-22T04:24:17.384Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.642 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 2a234799-3b57-4039-ab8f-2c351ec45f1b[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.650 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.650 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.650 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Audit Test Customer",7500,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.659 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","6e9e5d8a-1afb-4735-abf0-665d49cd64bb",null,"{\"name\":\"Audit Test Customer\",\"salary\":7500,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"6e9e5d8a-1afb-4735-abf0-665d49cd64bb\",\"createdAt\":\"2026-01-22T04:24:17.411Z\",\"updatedAt\":\"2026-01-22T04:24:17.411Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.668 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 53e2fe38-3e7c-4cc2-bce6-53cc081eb4b7[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.674 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.674 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.674 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Customer 1",5000,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.680 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["login-test-1769045056677@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.682 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.683 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["login-test-1769045056677@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","cae4b6ba-4b1b-4d7d-865f-b8a482f3683e",null,"{\"name\":\"Customer 1\",\"salary\":5000,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"cae4b6ba-4b1b-4d7d-865f-b8a482f3683e\",\"createdAt\":\"2026-01-22T04:24:17.433Z\",\"updatedAt\":\"2026-01-22T04:24:17.433Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.691 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: c18449a0-81eb-4e0a-a320-d6375d394925[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.691 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio c18449a0-81eb-4e0a-a320-d6375d394925[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["c18449a0-81eb-4e0a-a320-d6375d394925","login-test-1769045056677@example.com","CREATE","User","c18449a0-81eb-4e0a-a320-d6375d394925",null,"{\"email\":\"login-test-1769045056677@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"c18449a0-81eb-4e0a-a320-d6375d394925\",\"createdAt\":\"2026-01-22T04:24:17.440Z\",\"updatedAt\":\"2026-01-22T04:24:17.440Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.694 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 1eeee94b-120c-424f-8255-89215f4b11de[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.698 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.698 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.699 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.700 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: e4b98453-9954-47c3-b81c-fffffa60e751[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Customer 2",6000,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["login-test-1769045056677@example.com"][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.705 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["c18449a0-81eb-4e0a-a320-d6375d394925"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.705 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.706 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.709 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["c18449a0-81eb-4e0a-a320-d6375d394925","login-test-1769045056677@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","998cadf2685e71a8262870435ad1f80ad44fa32a2bfee77b3ad8381915484176","2026-01-29T01:24:16.710Z",null,null,"2026-01-22T04:24:17.440Z","2026-01-22T01:24:16.710Z",null,1,"c18449a0-81eb-4e0a-a320-d6375d394925"][0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.710 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.711 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","1b73e2e4-5a66-4ead-8e4d-33beb04236ee",null,"{\"name\":\"Customer 2\",\"salary\":6000,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"1b73e2e4-5a66-4ead-8e4d-33beb04236ee\",\"createdAt\":\"2026-01-22T04:24:17.457Z\",\"updatedAt\":\"2026-01-22T04:24:17.457Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["c18449a0-81eb-4e0a-a320-d6375d394925"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["c18449a0-81eb-4e0a-a320-d6375d394925"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.719 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 1edef74e-aa1e-4da4-ac2a-ae87ac7f70a9[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.722 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.722 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.723 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.723 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.723 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/stats - usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.723 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Iniciando obtenâ”œÂºâ”œÃºo de estatâ”œÂ¡sticas para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.726 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.727 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Fri Jan 23 2026 19:50:40 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.727 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:24:16 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.727 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.727 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio c18449a0-81eb-4e0a-a320-d6375d394925[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["c18449a0-81eb-4e0a-a320-d6375d394925","login-test-1769045056677@example.com","LOGIN","User","c18449a0-81eb-4e0a-a320-d6375d394925",null,"{\"email\":\"login-test-1769045056677@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.737 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: d67b0048-972e-475f-9100-55291adbccd8[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.737 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: login-test-1769045056677@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"audit_logs"[0m [37m"AuditLog"[0m [94mWHERE[0m [37m"AuditLog"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.742 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Estatâ”œÂ¡sticas obtidas com sucesso - Usuâ”œÃ­rios: 61, Clientes: 77, Auditorias: 151[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["wrong-pwd-1769045056739@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.743 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [32m1[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.748 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: wrong-pwd-1769045056739@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["wrong-pwd-1769045056739@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.754 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.754 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.755 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.757 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.757 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.757 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.759 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.759 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.759 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.761 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.761 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.762 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.763 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.764 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: audit-test-1769045056402@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.764 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Concurrent Customer 0",5000,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Concurrent Customer 1",5100,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Concurrent Customer 2",5200,null,"ACTIVE",null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.767 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: d100ce05-c692-4e0b-ad2c-5a4d6c0eddb2[39m
    [35mcontext[39m: "CreateUserUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.767 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio d100ce05-c692-4e0b-ad2c-5a4d6c0eddb2[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["d100ce05-c692-4e0b-ad2c-5a4d6c0eddb2","wrong-pwd-1769045056739@example.com","CREATE","User","d100ce05-c692-4e0b-ad2c-5a4d6c0eddb2",null,"{\"email\":\"wrong-pwd-1769045056739@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"d100ce05-c692-4e0b-ad2c-5a4d6c0eddb2\",\"createdAt\":\"2026-01-22T04:24:17.503Z\",\"updatedAt\":\"2026-01-22T04:24:17.503Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.775 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","5e42d15d-f48a-42b9-9c1e-af9189311fd3",null,"{\"name\":\"Concurrent Customer 0\",\"salary\":5000,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"5e42d15d-f48a-42b9-9c1e-af9189311fd3\",\"createdAt\":\"2026-01-22T04:24:17.509Z\",\"updatedAt\":\"2026-01-22T04:24:17.509Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.781 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.781 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 1b6369aa-9ece-4fc1-a99e-968fc9ecf881[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.782 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","bc150ec8-cbf8-4ed6-8797-bb0846140281",null,"{\"name\":\"Concurrent Customer 1\",\"salary\":5100,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"bc150ec8-cbf8-4ed6-8797-bb0846140281\",\"createdAt\":\"2026-01-22T04:24:17.512Z\",\"updatedAt\":\"2026-01-22T04:24:17.512Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","763dc56e-da41-4df1-8345-230756f9e163",null,"{\"name\":\"Concurrent Customer 2\",\"salary\":5200,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"763dc56e-da41-4df1-8345-230756f9e163\",\"createdAt\":\"2026-01-22T04:24:17.514Z\",\"updatedAt\":\"2026-01-22T04:24:17.514Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["wrong-pwd-1769045056739@example.com"][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.787 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”Ã˜Ã® Login attempt com senha incorreta: wrong-pwd-1769045056739@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.788 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Email ou senha invâ”œÃ­lidos[39m
    [35mcontext[39m: {
      "path": "/api/auth/login",
      "method": "POST"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.789 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 6e4464df-7061-4f30-ae3a-0bd939cadd0f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Concurrent Customer 3",5300,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","Concurrent Customer 4",5400,null,"ACTIVE",null][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.792 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["refresh-test-1769045056789@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.794 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: aac4306c-b31f-4b08-9c5b-f2bfa04ae112[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.795 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 02051846-71b1-4eea-8864-dc0c9e7b7fc4[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.797 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["refresh-test-1769045056789@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.801 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","e48bd4f6-7ae4-4728-9a80-fb5aa330bf8b",null,"{\"name\":\"Concurrent Customer 3\",\"salary\":5300,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"e48bd4f6-7ae4-4728-9a80-fb5aa330bf8b\",\"createdAt\":\"2026-01-22T04:24:17.542Z\",\"updatedAt\":\"2026-01-22T04:24:17.542Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.805 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: aaecff34-bb58-4085-920b-989ef1a8382f[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.805 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio aaecff34-bb58-4085-920b-989ef1a8382f[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.806 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f","refresh-test-1769045056789@example.com","CREATE","User","aaecff34-bb58-4085-920b-989ef1a8382f",null,"{\"email\":\"refresh-test-1769045056789@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"aaecff34-bb58-4085-920b-989ef1a8382f\",\"createdAt\":\"2026-01-22T04:24:17.550Z\",\"updatedAt\":\"2026-01-22T04:24:17.550Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65","","CREATE","Customer","3bba3621-e73c-406f-ab37-4b30d7af72cc",null,"{\"name\":\"Concurrent Customer 4\",\"salary\":5400,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"60f3e4af-c8ca-46f0-8e5c-e8f8fb20ed65\",\"id\":\"3bba3621-e73c-406f-ab37-4b30d7af72cc\",\"createdAt\":\"2026-01-22T04:24:17.543Z\",\"updatedAt\":\"2026-01-22T04:24:17.543Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.809 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: f972e21f-a887-44d6-a0bf-be0f42346109[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.812 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 56086fb0-4ad9-44e0-b304-cf654693dec8[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["refresh-test-1769045056789@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.817 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 51b0f6a1-e563-4672-8518-77b25ffd1905[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.818 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.818 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.818 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.821 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LoginUseCase"
 PASS   backend-e2e  apps/backend-e2e/src/backend/audit-and-health.spec.ts
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f","refresh-test-1769045056789@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","8978a366441599733259309c201931e8c65cace420d312ce0487102f54a08ad0","2026-01-29T01:24:16.822Z",null,null,"2026-01-22T04:24:17.550Z","2026-01-22T01:24:16.822Z",null,1,"aaecff34-bb58-4085-920b-989ef1a8382f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.822 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.836 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.836 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Fri Jan 23 2026 19:50:40 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.836 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:24:16 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.836 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.837 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio aaecff34-bb58-4085-920b-989ef1a8382f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f","refresh-test-1769045056789@example.com","LOGIN","User","aaecff34-bb58-4085-920b-989ef1a8382f",null,"{\"email\":\"refresh-test-1769045056789@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.845 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 75bb56e4-fd32-4c16-a4cb-4d24f9715141[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.845 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.848 -0300 Â­Æ’Ã¶Âº DEBUG: [36mPOST /auth/refresh chamado[39m
    [35mcontext[39m: "AuthController"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.850 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¤ Iniciando refresh para cliente: aaecff34-bb58-4085-920b-989ef1a8382f[39m
    [35mcontext[39m: "RefreshTokenUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.852 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token validado com sucesso[39m
    [35mcontext[39m: "RefreshTokenUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f","refresh-test-1769045056789@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","e071196c2d074b6f8e408efde9ba45645de611ffd64e457f50461551a80309b6","2026-01-29T01:24:16.853Z",null,null,"2026-01-22T04:24:17.550Z","2026-01-22T04:24:17.582Z",null,2,"aaecff34-bb58-4085-920b-989ef1a8382f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.852 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Novo Access Token gerado[39m
    [35mcontext[39m: "RefreshTokenUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.861 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Novo Refresh Token hash salvo[39m
    [35mcontext[39m: "RefreshTokenUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.861 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Tokens rotacionados com sucesso[39m
    [35mcontext[39m: "RefreshTokenUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.861 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.REFRESH_TOKEN para usuâ”œÃ­rio aaecff34-bb58-4085-920b-989ef1a8382f[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["aaecff34-bb58-4085-920b-989ef1a8382f","refresh-test-1769045056789@example.com","REFRESH_TOKEN","User","aaecff34-bb58-4085-920b-989ef1a8382f",null,null,null,"unknown","unknown","/api/auth/refresh","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.870 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: f1fad9f6-0b5d-4ab7-8a7f-dcbb8833937c[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.870 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de refresh token registrada: refresh-test-1769045056789@example.com[39m
    [35mcontext[39m: "RefreshTokenUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.873 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["customer-test-1769045056871@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.876 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["customer-test-1769045056871@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.883 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 48a3c6d7-5d0b-4bf0-81d7-d028699c72c5[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.883 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 48a3c6d7-5d0b-4bf0-81d7-d028699c72c5[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5","customer-test-1769045056871@example.com","CREATE","User","48a3c6d7-5d0b-4bf0-81d7-d028699c72c5",null,"{\"email\":\"customer-test-1769045056871@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"48a3c6d7-5d0b-4bf0-81d7-d028699c72c5\",\"createdAt\":\"2026-01-22T04:24:17.625Z\",\"updatedAt\":\"2026-01-22T04:24:17.625Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.890 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 3aeb55eb-8996-4664-9b33-e2912ed4cd4c[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["customer-test-1769045056871@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.895 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.895 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.896 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.899 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5","customer-test-1769045056871@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","51bb9c26f775d6be32c597c19121721591a81ba7cdcba85d28ed9ae5d5e04290","2026-01-29T01:24:16.900Z",null,null,"2026-01-22T04:24:17.625Z","2026-01-22T01:24:16.900Z",null,1,"48a3c6d7-5d0b-4bf0-81d7-d028699c72c5"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.900 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Fri Jan 23 2026 19:50:40 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:24:16 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.913 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.913 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 48a3c6d7-5d0b-4bf0-81d7-d028699c72c5[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5","customer-test-1769045056871@example.com","LOGIN","User","48a3c6d7-5d0b-4bf0-81d7-d028699c72c5",null,"{\"email\":\"customer-test-1769045056871@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.921 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 2dec49e1-488d-4914-876e-01a146fb235d[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.921 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.924 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.924 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.925 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando cliente para usuâ”œÃ­rio: 48a3c6d7-5d0b-4bf0-81d7-d028699c72c5[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"customers"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"name"[0m[37m,[0m [37m"salary"[0m[37m,[0m [37m"company"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m6[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5","Joâ”œÃºo Silva",5000.5,null,"ACTIVE",null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.932 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: Customer.CREATE para usuâ”œÃ­rio 48a3c6d7-5d0b-4bf0-81d7-d028699c72c5[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["48a3c6d7-5d0b-4bf0-81d7-d028699c72c5","","CREATE","Customer","e1bbdf93-df58-4c52-b8a3-09dd469322ec",null,"{\"name\":\"Joâ”œÃºo Silva\",\"salary\":5000.5,\"company\":null,\"status\":\"ACTIVE\",\"deletedAt\":null,\"userId\":\"48a3c6d7-5d0b-4bf0-81d7-d028699c72c5\",\"id\":\"e1bbdf93-df58-4c52-b8a3-09dd469322ec\",\"createdAt\":\"2026-01-22T04:24:17.671Z\",\"updatedAt\":\"2026-01-22T04:24:17.671Z\"}",null,null,null,"/api/customers","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.940 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: a009003c-9233-4d1a-b549-1a435c26e0bb[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.944 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"customer_id"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"customer_userId"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"customer_name"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"customer_salary"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"customer_company"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"customer_status"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"customer_createdAt"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"customer_updatedAt"[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mORDER BY[0m [37m"customer"[0m[37m.[0m[37m"name"[0m [94mASC[0m [94mLIMIT[0m [32m10[0m [37mOFFSET[0m [32m0[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.944 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.944 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã¯ Listando clientes: skip=0, take=10, search=undefined, searchField=status[39m
    [35mcontext[39m: "CustomerController"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.954 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["e1bbdf93-df58-4c52-b8a3-09dd469322ec"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.954 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.954 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¬ Buscando cliente: e1bbdf93-df58-4c52-b8a3-09dd469322ec[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.960 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["non-existent-id"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.960 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: customer-test-1769045056871@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.960 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã¬ Buscando cliente: non-existent-id[39m
    [35mcontext[39m: "CustomerController"
[4m[31mquery failed:[39m[24m [94mSELECT[0m [37m"Customer"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"Customer_id"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"userId"[0m [94mAS[0m [37m"Customer_userId"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"name"[0m [94mAS[0m [37m"Customer_name"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"salary"[0m [94mAS[0m [37m"Customer_salary"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"company"[0m [94mAS[0m [37m"Customer_company"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"Customer_status"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"Customer_createdAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"Customer_updatedAt"[0m[37m,[0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"Customer_deletedAt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["non-existent-id"][0m
[4m[31merror:[39m[24m error: invalid input syntax for type uuid: "non-existent-id"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.964 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Erro ao buscar cliente: QueryFailedError: invalid input syntax for type uuid: "non-existent-id"[39m
    [35mcontext[39m: "CustomerController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:16.999 -0300 Ã”Ã˜Ã® ERROR: [36mÃ”Ã˜Ã® Uncaught Error: invalid input syntax for type uuid: "non-existent-id"[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers/non-existent-id",
      "method": "GET"
    }
    [35mtrace[39m: "QueryFailedError: invalid input syntax for type uuid: \"non-existent-id\"\n    at PostgresQueryRunner.query (C:\Projects\Desafio\teddy-challenger\src\driver\postgres\PostgresQueryRunner.ts:325:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SelectQueryBuilder.loadRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3868:25)\n    at SelectQueryBuilder.executeEntitiesAndRawResults (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:3614:26)\n    at SelectQueryBuilder.getRawAndEntities (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1671:29)\n    at SelectQueryBuilder.getOne (C:\Projects\Desafio\teddy-challenger\src\query-builder\SelectQueryBuilder.ts:1698:25)\n    at FindCustomerByIdUseCase.execute (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\presentation\use-cases\find-customer-by-id.ucase.ts:9:1)\n    at CustomerController.findOne (C:\Projects\Desafio\teddy-challenger\apps\backend\src\app\modules\customers\adapters\controllers\customer.controller.ts:51:1)\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-execution-context.js:46:28\n    at C:\Projects\Desafio\teddy-challenger\node_modules\@nestjs\core\router\router-proxy.js:9:17"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.003 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dashboard-test-1769045057001@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.006 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã´Ã˜ Criando usuâ”œÃ­rio: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"users"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"email"[0m[37m,[0m [37m"password"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"refreshTokenHash"[0m[37m,[0m [37m"refreshTokenExpires"[0m[37m,[0m [37m"recoveryTokenHash"[0m[37m,[0m [37m"recoveryTokenExpires"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m4[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"updatedAt"[0m[37m,[0m [37m"deletedAt"[0m[37m,[0m [37m"accessCount"[0m [90m-- PARAMETERS: ["dashboard-test-1769045057001@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE",0][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.014 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio criado com sucesso: 8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3[39m
    [35mcontext[39m: "CreateUserUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.014 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.CREATE para usuâ”œÃ­rio 8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3","dashboard-test-1769045057001@example.com","CREATE","User","8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3",null,"{\"email\":\"dashboard-test-1769045057001@example.com\",\"password\":\"6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6\",\"status\":\"ACTIVE\",\"accessCount\":0,\"refreshTokenHash\":null,\"refreshTokenExpires\":null,\"recoveryTokenHash\":null,\"recoveryTokenExpires\":null,\"id\":\"8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3\",\"createdAt\":\"2026-01-22T04:24:17.749Z\",\"updatedAt\":\"2026-01-22T04:24:17.749Z\",\"deletedAt\":null}",null,null,null,"/api/v1/users","POST","201",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.021 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: aa0e21cb-c418-4298-9bd2-474469e2da36[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["dashboard-test-1769045057001@example.com"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.026 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Usuâ”œÃ­rio autenticado: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LocalUserStrategy"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.026 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Guard validado para: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LocalUserAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.027 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¶Ã‰ Iniciando login para: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.030 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Access Token gerado com TTL 3600s: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m,[0m [37m"email"[0m [37m=[0m [37m$[0m[32m2[0m[37m,[0m [37m"password"[0m [37m=[0m [37m$[0m[32m3[0m[37m,[0m [37m"status"[0m [37m=[0m [37m$[0m[32m4[0m[37m,[0m [37m"refreshTokenHash"[0m [37m=[0m [37m$[0m[32m5[0m[37m,[0m [37m"refreshTokenExpires"[0m [37m=[0m [37m$[0m[32m6[0m[37m,[0m [37m"recoveryTokenHash"[0m [37m=[0m [37m$[0m[32m7[0m[37m,[0m [37m"recoveryTokenExpires"[0m [37m=[0m [37m$[0m[32m8[0m[37m,[0m [37m"createdAt"[0m [37m=[0m [37m$[0m[32m9[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37m$[0m[32m10[0m[37m,[0m [37m"deletedAt"[0m [37m=[0m [37m$[0m[32m11[0m[37m,[0m [37m"accessCount"[0m [37m=[0m [37m$[0m[32m12[0m [94mWHERE[0m [37m"id"[0m [94mIN[0m [37m([0m[37m$[0m[32m13[0m[37m)[0m [90m-- PARAMETERS: ["8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3","dashboard-test-1769045057001@example.com","6faba6e4ed724c5b54fad19eca98923e2198cdbba78db5e74672c83217fb33a6","ACTIVE","3cca63d3c2403fadf17b314137924923c94b5aa2f554280233cda71a4dadafc9","2026-01-29T01:24:17.032Z",null,null,"2026-01-22T04:24:17.749Z","2026-01-22T01:24:17.032Z",null,1,"8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.032 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh Token gerado com TTL 604800s: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"id"[0m [94mAS[0m [37m"User_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password"[0m [94mAS[0m [37m"User_password"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"status"[0m [94mAS[0m [37m"User_status"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenHash"[0m [94mAS[0m [37m"User_refreshTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"refreshTokenExpires"[0m [94mAS[0m [37m"User_refreshTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenHash"[0m [94mAS[0m [37m"User_recoveryTokenHash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"recoveryTokenExpires"[0m [94mAS[0m [37m"User_recoveryTokenExpires"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"createdAt"[0m [94mAS[0m [37m"User_createdAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updatedAt"[0m [94mAS[0m [37m"User_updatedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mAS[0m [37m"User_deletedAt"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"accessCount"[0m [94mAS[0m [37m"User_accessCount"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"id"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m [94mAND[0m [37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3"][0m
[90m[4mquery:[24m[39m [94mUPDATE[0m [37m"users"[0m [94mSET[0m [37m"accessCount"[0m [37m=[0m [37m"accessCount"[0m [37m+[0m [32m1[0m[37m,[0m [37m"updatedAt"[0m [37m=[0m [37mCURRENT_TIMESTAMP[0m [94mWHERE[0m [37m"id"[0m [37m=[0m [37m$[0m[32m1[0m [90m-- PARAMETERS: ["8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3"][0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.046 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Refresh token hash e contador de acessos atualizados no BD: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LoginUseCase"
[90m[4mquery:[24m[39m [37mSTART[0m [37mTRANSACTION[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.046 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie Authentication com expiraâ”œÂºâ”œÃºo: Fri Jan 23 2026 22:37:20 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.047 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÂ­Æ’Ã¬Â¬ Setando cookie RefreshToken com expiraâ”œÂºâ”œÃºo: Wed Jan 28 2026 22:24:17 GMT-0300 (Horâ”œÃ­rio Padrâ”œÃºo de Brasâ”œÂ¡lia)[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.047 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Cookies httpOnly setados: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.047 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã´Ã˜ Registrando auditoria: User.LOGIN para usuâ”œÃ­rio 8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3[39m
    [35mcontext[39m: "LogAuditUseCase"
[90m[4mquery:[24m[39m [94mINSERT INTO[0m [37m"audit_logs"[0m[37m([0m[37m"id"[0m[37m,[0m [37m"userId"[0m[37m,[0m [37m"userEmail"[0m[37m,[0m [37m"action"[0m[37m,[0m [37m"entityType"[0m[37m,[0m [37m"entityId"[0m[37m,[0m [37m"oldValues"[0m[37m,[0m [37m"newValues"[0m[37m,[0m [37m"changes"[0m[37m,[0m [37m"ipAddress"[0m[37m,[0m [37m"userAgent"[0m[37m,[0m [37m"endpoint"[0m[37m,[0m [37m"httpMethod"[0m[37m,[0m [37m"status"[0m[37m,[0m [37m"errorMessage"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m[37m)[0m [94mVALUES[0m [37m([0m[94mDEFAULT[0m[37m,[0m [37m$[0m[32m1[0m[37m,[0m [37m$[0m[32m2[0m[37m,[0m [37m$[0m[32m3[0m[37m,[0m [37m$[0m[32m4[0m[37m,[0m [37m$[0m[32m5[0m[37m,[0m [37m$[0m[32m6[0m[37m,[0m [37m$[0m[32m7[0m[37m,[0m [37m$[0m[32m8[0m[37m,[0m [37m$[0m[32m9[0m[37m,[0m [37m$[0m[32m10[0m[37m,[0m [37m$[0m[32m11[0m[37m,[0m [37m$[0m[32m12[0m[37m,[0m [37m$[0m[32m13[0m[37m,[0m [37m$[0m[32m14[0m[37m,[0m [94mDEFAULT[0m[37m,[0m [37m$[0m[32m15[0m[37m)[0m [94mRETURNING[0m [37m"id"[0m[37m,[0m [37m"createdAt"[0m[37m,[0m [37m"deletedAt"[0m [90m-- PARAMETERS: ["8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3","dashboard-test-1769045057001@example.com","LOGIN","User","8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3",null,"{\"email\":\"dashboard-test-1769045057001@example.com\",\"accessCount\":1}",null,"unknown","unknown","/api/auth/login","POST","200",null,null][0m
[90m[4mquery:[24m[39m [94mCOMMIT[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.061 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Auditoria registrada: 7b151571-eb94-4124-a9f2-d2007490daa5[39m
    [35mcontext[39m: "LogAuditUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.062 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36mÃ”Â£Ã  Auditoria de login registrada: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "LoginUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.065 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"User"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"customers"[0m [37m"Customer"[0m [94mWHERE[0m [37m([0m [37m([0m[37m([0m[37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m[37m)[0m[37m)[0m [37m)[0m [94mAND[0m [37m([0m [37m"Customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [95mCOUNT[0m[37m([0m[32m1[0m[37m)[0m [94mAS[0m [37m"cnt"[0m [94mFROM[0m [37m"audit_logs"[0m [37m"AuditLog"[0m [94mWHERE[0m [37m"AuditLog"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.065 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.067 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.067 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.067 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/stats - usuâ”œÃ­rio: 8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.067 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Iniciando obtenâ”œÂºâ”œÃºo de estatâ”œÂ¡sticas para usuâ”œÃ­rio: 8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.071 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetDashboardStatsUseCase] Estatâ”œÂ¡sticas obtidas com sucesso - Usuâ”œÃ­rios: 65, Clientes: 83, Auditorias: 165[39m
    [35mcontext[39m: "GetDashboardStatsUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.075 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  Token extraâ”œÂ¡do do header Authorization[39m
    [35mcontext[39m: "JwtAuthGuard"
[90m[4mquery:[24m[39m [94mSELECT[0m [95mDATE_TRUNC[0m[37m([0m[37m'day'[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m[37m)[0m [94mas[0m [37mday[0m[37m,[0m [95mCOUNT[0m[37m([0m[37m"customer"[0m[37m.[0m[37m"id"[0m[37m)[0m[37m:[0m[37m:[0m[37mint[0m [94mas[0m [37mtotal[0m [94mFROM[0m [37m"customers"[0m [37m"customer"[0m [94mWHERE[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mAND[0m [37m([0m [37m"customer"[0m[37m.[0m[37m"deletedAt"[0m [94mIS NULL[0m [37m)[0m [94mGROUP BY[0m [95mDATE_TRUNC[0m[37m([0m[37m'day'[0m[37m,[0m [37m"customer"[0m[37m.[0m[37m"createdAt"[0m[37m)[0m [94mORDER BY[0m [37mday[0m [94mASC[0m
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.075 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã¦ Authorization header setado com token: eyJhbGciOiJIUzI1NiIs...[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.076 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT validado para: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "JwtStrategy"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.077 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÃ”Â£Ã  JWT vâ”œÃ­lido para usuâ”œÃ­rio: dashboard-test-1769045057001@example.com[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.077 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[DashboardController] GET /api/dashboard/customer-trend/day (days: 30) - usuâ”œÃ­rio: 8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3[39m
    [35mcontext[39m: "DashboardController"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.078 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetCustomerTrendByDayUseCase] Fetching customer trend for 30 days - usuâ”œÃ­rio: 8f57ba2f-a8d5-4846-ae1e-572a9bcee9c3[39m
    [35mcontext[39m: "GetCustomerTrendByDayUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.082 -0300 Ã”Ã¤â•£Â´Â©Ã…  INFO: [36m[GetCustomerTrendByDayUseCase] Successfully fetched 2 days of data[39m
    [35mcontext[39m: "GetCustomerTrendByDayUseCase"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.086 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Nâ”œÃºo autorizado[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "GET"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.089 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”Ã˜Ã® JWT invâ”œÃ­lido: jwt malformed[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.089 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 401 - Token invâ”œÃ­lido[39m
    [35mcontext[39m: {
      "path": "/api/v1/customers",
      "method": "GET"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.093 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.095 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 400 - email must be an email[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST"
    }
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.099 -0300 Â­Æ’Ã¶Âº DEBUG: [36mÂ­Æ’Ã¶Ã´ Rota pâ”œâ•‘blica - autenticaâ”œÂºâ”œÃºo dispensada[39m
    [35mcontext[39m: "JwtAuthGuard"
Â­Æ’Ã²Ã‰ 2026-01-21 22:24:17.100 -0300 Ã”ÃœÃ¡Â´Â©Ã…  WARN: [36mÃ”ÃœÃ¡Â´Â©Ã… HTTP Exception: 400 - password must be longer than or equal to 8 characters[39m
    [35mcontext[39m: {
      "path": "/api/v1/users",
      "method": "POST"
    }
 FAIL   backend-e2e  apps/backend-e2e/src/backend/complete-flow.spec.ts
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should get all customers
    expect(received).toBe(expected) // Object.is equality
    Expected: true
    Received: false

      139 |
      140 |       expect(response.status).toBe(200);
    > 141 |       expect(Array.isArray(response.data)).toBe(true);
          |                                            ^
      142 |     });
      143 |
      144 |     it('should get customer by id', async () => {

      at Object.toBe (src/backend/complete-flow.spec.ts:141:44)
  Ã”Ã¹Ã… E2E: Complete User Flow Ã”Ã‡â•‘ Customer Management Ã”Ã‡â•‘ should fail to get non-existent customer
    expect(received).toBe(expected) // Object.is equality
    Expected: 404
    Received: 500

      158 |         fail('Should have thrown 404');
      159 |       } catch (error: any) {
    > 160 |         expect(error.response?.status).toBe(404);
          |                                        ^
      161 |       }
      162 |     });
      163 |   });

      at Object.toBe (src/backend/complete-flow.spec.ts:160:40)
Test Suites: 1 failed, 2 passed, 3 total
Tests:       2 failed, 19 passed, 21 total
Snapshots:   0 total
Time:        1.838 s, estimated 2 s
Ran all test suites.
Attempting to close port 3000
[7m[1m[36m NX [39m[22m[27m [1mProcess exited with code 1, waiting for changes to restart...[22m
Port 3000 successfully closed
Tearing down...



 NX   Running target e2e for project backend-e2e and 2 tasks it depends on failed

Failed tasks:

- backend-e2e:e2e

Hint: run the command with --verbose for more details.

